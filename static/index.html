<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bonus 2026: Calcola Gratis Quali Bonus e Agevolazioni Ti Spettano | BonusPerMe</title>
  <meta name="description" content="Scopri in 2 minuti quali bonus, agevolazioni e detrazioni fiscali spettano alla tua famiglia nel 2026. Assegno Unico, Bonus Nido, Bonus Bollette, ADI, Carta Dedicata a Te e oltre 40 misure. Gratuito, anonimo, senza registrazione.">
  <meta name="keywords" content="bonus 2026, bonus famiglia 2026, agevolazioni fiscali 2026, assegno unico 2026, bonus nido, bonus bollette, ISEE, detrazioni fiscali, carta dedicata a te, ADI, bonus italia, calcolo bonus, bonus casa, ecobonus, superbonus">
  <meta name="author" content="BonusPerMe — Simone Nogara">
  <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1">
  <link rel="canonical" href="https://bonusperme.it/">
  <meta http-equiv="Content-Language" content="it">
  <meta name="geo.region" content="IT">
  <meta name="geo.placename" content="Italia">
  <link rel="alternate" hreflang="it" href="https://bonusperme.it/">
  <link rel="alternate" hreflang="en" href="https://bonusperme.it/?lang=en">
  <link rel="alternate" hreflang="fr" href="https://bonusperme.it/?lang=fr">
  <link rel="alternate" hreflang="es" href="https://bonusperme.it/?lang=es">
  <link rel="alternate" hreflang="ro" href="https://bonusperme.it/?lang=ro">
  <link rel="alternate" hreflang="ar" href="https://bonusperme.it/?lang=ar">
  <link rel="alternate" hreflang="sq" href="https://bonusperme.it/?lang=sq">
  <link rel="alternate" hreflang="x-default" href="https://bonusperme.it/">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://bonusperme.it/">
  <meta property="og:title" content="Bonus 2026: Calcola Gratis Quali Ti Spettano | BonusPerMe">
  <meta property="og:description" content="Scopri in 2 minuti quali bonus e agevolazioni spettano alla tua famiglia. Oltre 40 misure tra Assegno Unico, Bonus Nido, Bonus Bollette e detrazioni. Gratuito, senza registrazione.">
  <meta property="og:image" content="https://bonusperme.it/og-image.png">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta property="og:image:alt" content="BonusPerMe — Calcola gratis i bonus 2026 per la tua famiglia">
  <meta property="og:locale" content="it_IT">
  <meta property="og:locale:alternate" content="en_GB">
  <meta property="og:locale:alternate" content="fr_FR">
  <meta property="og:locale:alternate" content="es_ES">
  <meta property="og:locale:alternate" content="ro_RO">
  <meta property="og:locale:alternate" content="ar_SA">
  <meta property="og:locale:alternate" content="sq_AL">
  <meta property="og:site_name" content="BonusPerMe">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Bonus 2026: Calcola Gratis Quali Ti Spettano | BonusPerMe">
  <meta name="twitter:description" content="Scopri in 2 minuti quali bonus e agevolazioni spettano alla tua famiglia. Oltre 40 misure, gratuito e anonimo.">
  <meta name="twitter:image" content="https://bonusperme.it/og-image.png">
  <meta name="twitter:image:alt" content="BonusPerMe — Calcola gratis i bonus 2026 per la tua famiglia">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="manifest" href="/manifest.json">
  <meta name="theme-color" content="#1B3A54">
  <meta name="msapplication-TileColor" content="#1B3A54">
  <link rel="preconnect" href="https://www.googletagmanager.com" crossorigin>
  <link rel="dns-prefetch" href="https://www.googletagmanager.com">
  <link rel="preconnect" href="https://challenges.cloudflare.com" crossorigin>
  <link rel="dns-prefetch" href="https://challenges.cloudflare.com">
  <link rel="stylesheet" href="/fonts/fonts.css">
  {{if .TurnstileSiteKey}}<script src="https://challenges.cloudflare.com/turnstile/v0/api.js" async defer></script>{{end}}
  <!-- Google Tag Manager (loads only after cookie consent) -->
  <script>
    var __GTM_ID__='{{.GTMID}}';
    window.dataLayer=window.dataLayer||[];
    function pushDataLayer(obj){window.dataLayer.push(obj);}
    function loadGTM(){if(!__GTM_ID__||window._gtmLoaded)return;window._gtmLoaded=true;
    (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});
    var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';
    j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer',__GTM_ID__);
    pushDataLayer({event:'cookie_consent_granted'});}
    if(localStorage.getItem('cookie_consent')==='accepted'){loadGTM();}
  </script>
  <style>
    /* ============================================
       BONUSPERME — DESIGN SYSTEM v2
       Warm Institutional + Icons + Flag Dropdown
       ============================================ */

    *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }

    :root {
      --ink: #1C1C1F;
      --ink-75: #404045;
      --ink-50: #76767C;
      --ink-30: #757575;
      --ink-15: #D4D4D7;
      --ink-05: #F0F0F1;

      --warm-white: #FAFAF7;
      --warm-cream: #F4F3EE;
      --warm-sand: #EAE8E0;

      --blue: #1B3A54;
      --blue-mid: #2D5F8A;
      --blue-light: #E6EEF4;
      --blue-glow: #D0E2F0;

      --terra: #C0522E;
      --terra-dark: #9E3F20;
      --terra-light: #FAF0EB;
      --terra-glow: #F5DDD1;

      --green: #2A6B45;
      --green-light: #E8F3EC;

      --amber: #9A7B2E;
      --amber-light: #FBF5E6;

      --radius: 5px;
      --radius-lg: 8px;
      --shadow-subtle: 0 1px 2px rgba(0,0,0,0.04);
      --shadow-card: 0 1px 3px rgba(0,0,0,0.05), 0 4px 16px rgba(0,0,0,0.04);
      --shadow-hover: 0 2px 8px rgba(0,0,0,0.08), 0 8px 24px rgba(0,0,0,0.06);
      --shadow-dropdown: 0 4px 20px rgba(0,0,0,0.12), 0 1px 3px rgba(0,0,0,0.06);

      --max-w: 1040px;
      --gutter: 24px;
    }

    /* Skip link */
    .skip-link{position:absolute;top:-100%;left:50%;transform:translateX(-50%);background:var(--blue);color:#fff;padding:12px 24px;z-index:9999;border-radius:0 0 var(--radius) var(--radius);font-weight:600;text-decoration:none;font-size:.9rem;transition:top .2s}
    .skip-link:focus{top:0}
    /* Screen reader only */
    .sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}

    html { scroll-behavior: smooth; -webkit-font-smoothing: antialiased; }

    body {
      font-family: 'DM Sans', -apple-system, BlinkMacSystemFont, sans-serif;
      font-size: 15px;
      line-height: 1.65;
      color: var(--ink);
      background: var(--warm-white);
    }

    .container { max-width: var(--max-w); margin: 0 auto; padding: 0 var(--gutter); }

    /* Typography */
    h1, h2, h3 { font-family: 'DM Serif Display', Georgia, serif; font-weight: 400; }
    h1 { font-size: clamp(2rem, 4.5vw, 2.75rem); line-height: 1.15; letter-spacing: -0.01em; color: var(--ink); }
    h2 { font-size: clamp(1.5rem, 3vw, 2rem); line-height: 1.2; color: var(--ink); }
    h3 { font-size: 1.05rem; line-height: 1.35; }

    .label {
      font-family: 'DM Sans', sans-serif;
      font-size: 0.7rem;
      font-weight: 600;
      letter-spacing: 0.1em;
      text-transform: uppercase;
    }

    a { color: var(--blue-mid); text-decoration: none; }
    a:hover { text-decoration: underline; }

    /* ============================================
       INLINE SVG ICON SYSTEM
       ============================================ */
    .icon {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 20px;
      height: 20px;
      flex-shrink: 0;
    }
    .icon svg {
      width: 100%;
      height: 100%;
    }
    .icon-sm { width: 16px; height: 16px; }
    .icon-lg { width: 24px; height: 24px; }
    .icon-xl { width: 32px; height: 32px; }

    /* ============================================
       BUTTONS
       ============================================ */
    .btn {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 13px 28px;
      border: none;
      border-radius: var(--radius);
      font-family: 'DM Sans', sans-serif;
      font-size: 0.88rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.15s ease;
      text-decoration: none;
    }
    .btn-primary {
      background: var(--terra);
      color: #fff;
    }
    .btn-primary:hover {
      background: var(--terra-dark);
      text-decoration: none;
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(192,82,46,0.25);
    }
    .btn-outline {
      background: transparent;
      color: var(--terra);
      border: 1.5px solid var(--terra);
    }
    .btn-outline:hover {
      background: var(--terra-light);
      text-decoration: none;
    }

    /* ============================================
       TOPBAR
       ============================================ */
    /* ============================================
       TOPBAR
       ============================================ */
    .topbar { background: var(--blue); color: rgba(255,255,255,0.7); font-size: 0.72rem; padding: 6px 0; }
    .topbar-inner { max-width: var(--max-w); margin: 0 auto; padding: 0 var(--gutter); display: flex; align-items: center; gap: 6px; flex-wrap: wrap; }
    .topbar-separator { opacity: 0.4; }
    .topbar-right { margin-left: auto; }
    .lang-select { background: rgba(255,255,255,0.1); color: #fff; border: 1px solid rgba(255,255,255,0.2); border-radius: 4px; font-size: 0.72rem; padding: 2px 6px; cursor: pointer; font-family: inherit; }
    .lang-select option { color: #333; background: #fff; }

    /* ============================================
       HEADER
       ============================================ */
    .site-header { background: #fff; border-bottom: 1px solid var(--ink-15); position: sticky; top: 0; z-index: 100; }
    .site-header .header-inner { display: flex; align-items: center; justify-content: space-between; height: 54px; }
    .logo { display: flex; align-items: center; gap: 8px; text-decoration: none; color: var(--ink); }
    .logo:hover { text-decoration: none; }
    .logo-mark { width: 26px; height: 26px; background: var(--blue); border-radius: 4px; display: flex; align-items: center; justify-content: center; color: #fff; font-family: 'DM Serif Display', serif; font-size: 14px; line-height: 1; }
    .logo-text { font-family: 'DM Serif Display', serif; font-size: 1.15rem; font-weight: 400; color: var(--blue); }
    .main-nav { display: flex; gap: 20px; }
    .nav-link { font-family: 'DM Sans', sans-serif; font-size: 0.85rem; color: var(--ink-50); text-decoration: none; transition: color 0.15s; }
    .nav-link:hover { color: var(--blue); text-decoration: none; }
    .nav-link.active { color: var(--blue); font-weight: 600; }

    /* ============================================
       HERO
       ============================================ */
    .hero {
      background: var(--warm-cream);
      padding: 72px 0 64px;
      border-bottom: 1px solid var(--warm-sand);
    }
    .hero-grid {
      display: grid;
      grid-template-columns: 1fr 380px;
      gap: 56px;
      align-items: start;
    }
    .hero-pretitle {
      color: var(--terra);
      margin-bottom: 16px;
      display: flex;
      align-items: center;
      gap: 6px;
    }
    .hero-pretitle .icon { color: var(--terra); }
    .hero h1 { margin-bottom: 20px; }
    .hero-subtitle {
      font-size: 1.02rem;
      line-height: 1.65;
      color: var(--ink-75);
      max-width: 480px;
      margin-bottom: 32px;
    }
    .hero-cta-row {
      display: flex;
      align-items: center;
      gap: 20px;
      margin-bottom: 12px;
    }
    .hero-meta {
      font-size: 0.78rem;
      color: var(--ink-50);
      display: flex;
      align-items: center;
      gap: 12px;
    }
    .hero-meta-item {
      display: flex;
      align-items: center;
      gap: 4px;
    }
    .hero-meta-item .icon { width: 14px; height: 14px; color: var(--ink-30); }

    /* Proof card */
    .proof-card {
      background: #fff;
      border: 1px solid var(--ink-15);
      border-radius: var(--radius-lg);
      padding: 32px;
      box-shadow: var(--shadow-card);
    }
    .proof-number {
      font-family: 'JetBrains Mono', monospace;
      font-size: 2.4rem;
      font-weight: 600;
      color: var(--blue);
      line-height: 1;
      margin-bottom: 4px;
    }
    .proof-label {
      font-size: 0.82rem;
      color: var(--ink-50);
      margin-bottom: 24px;
    }
    .proof-divider {
      border: none;
      border-top: 1px solid var(--ink-15);
      margin: 0 0 24px;
    }
    .proof-quote {
      font-family: 'DM Serif Display', serif;
      font-style: italic;
      font-size: 0.95rem;
      line-height: 1.55;
      color: var(--ink-75);
      margin-bottom: 12px;
    }
    .proof-source {
      font-size: 0.7rem;
      color: var(--ink-30);
      display: flex;
      align-items: center;
      gap: 4px;
    }
    .proof-source .icon { width: 12px; height: 12px; }

    /* ============================================
       QUICK ESTIMATE
       ============================================ */
    .estimate {
      padding: 56px 0;
      background: #fff;
      border-bottom: 1px solid var(--ink-15);
    }
    .estimate-inner {
      max-width: 580px;
      margin: 0 auto;
      text-align: center;
    }
    .estimate-title {
      display: flex;
      align-items: center;
      gap: 8px;
      justify-content: center;
      margin-bottom: 4px;
    }
    .estimate-title h3 {
      font-family: 'DM Sans', sans-serif;
      font-weight: 600;
      font-size: 1.05rem;
    }
    .estimate-title .icon { color: var(--green); }
    .estimate-sub {
      font-size: 0.85rem;
      color: var(--ink-50);
      margin-bottom: 24px;
    }
    .estimate-row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
      margin-bottom: 20px;
    }
    .estimate-field label {
      display: flex;
      align-items: center;
      gap: 4px;
      font-size: 0.7rem;
      font-weight: 600;
      letter-spacing: 0.06em;
      text-transform: uppercase;
      color: var(--ink-50);
      margin-bottom: 6px;
      text-align: left;
    }
    .estimate-field label .icon { width: 13px; height: 13px; color: var(--ink-30); }
    .estimate-field select {
      width: 100%;
      height: 42px;
      border: 1px solid var(--ink-15);
      border-radius: var(--radius);
      padding: 0 12px;
      font-family: 'DM Sans', sans-serif;
      font-size: 0.88rem;
      color: var(--ink);
      background: #fff;
      cursor: pointer;
      appearance: none;
      background-image: url("data:image/svg+xml,%3Csvg width='10' height='6' viewBox='0 0 10 6' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M1 1L5 5L9 1' stroke='%2376767C' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E");
      background-repeat: no-repeat;
      background-position: right 12px center;
    }
    .estimate-field select:focus {
      outline: none;
      border-color: var(--blue-mid);
      box-shadow: 0 0 0 3px var(--blue-glow);
    }
    .estimate-result {
      background: var(--green-light);
      border-radius: var(--radius);
      padding: 16px 24px;
      margin-bottom: 8px;
      display: flex;
      align-items: center;
      gap: 10px;
      justify-content: center;
    }
    .estimate-result .icon { color: var(--green); width: 22px; height: 22px; }
    .estimate-amount {
      font-family: 'JetBrains Mono', monospace;
      font-size: 1.4rem;
      font-weight: 600;
      color: var(--green);
    }
    .estimate-note {
      font-size: 0.72rem;
      color: var(--ink-50);
      margin-top: 12px;
    }

    /* ============================================
       HOW IT WORKS
       ============================================ */
    .how {
      padding: 80px 0;
      background: var(--warm-cream);
      border-bottom: 1px solid var(--warm-sand);
    }
    .section-header {
      margin-bottom: 48px;
    }
    .section-header h2 { margin-bottom: 8px; }
    .section-header p { font-size: 0.92rem; color: var(--ink-50); }

    .how-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 16px;
    }
    .how-card {
      background: #fff;
      border: 1px solid var(--ink-15);
      border-radius: var(--radius-lg);
      padding: 28px 24px;
      transition: box-shadow 0.2s, transform 0.2s;
    }
    .how-card:hover {
      box-shadow: var(--shadow-hover);
      transform: translateY(-2px);
    }
    .how-icon-row {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 16px;
    }
    .how-num {
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.82rem;
      font-weight: 600;
      color: var(--blue);
      opacity: 0.6;
    }
    .how-card-icon {
      width: 36px;
      height: 36px;
      border-radius: var(--radius);
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .how-card-icon.step-1 { background: var(--terra-light); color: var(--terra); }
    .how-card-icon.step-2 { background: var(--blue-light); color: var(--blue); }
    .how-card-icon.step-3 { background: var(--green-light); color: var(--green); }
    .how-card-icon.step-4 { background: var(--amber-light); color: var(--amber); }
    .how-card-icon .icon { width: 18px; height: 18px; }

    .how-card h3 {
      font-family: 'DM Sans', sans-serif;
      font-size: 0.95rem;
      font-weight: 600;
      margin-bottom: 8px;
      color: var(--ink);
    }
    .how-card p {
      font-size: 0.82rem;
      color: var(--ink-50);
      line-height: 1.55;
    }

    /* ============================================
       NEWS
       ============================================ */
    .news {
      padding: 80px 0;
      background: #fff;
      border-bottom: 1px solid var(--ink-15);
    }
    .news-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 16px;
    }
    .news-card {
      border: 1px solid var(--ink-15);
      border-radius: var(--radius-lg);
      padding: 24px;
      position: relative;
      transition: box-shadow 0.2s;
    }
    .news-card:hover { box-shadow: var(--shadow-card); }
    .news-badge {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      font-size: 0.6rem;
      font-weight: 700;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      padding: 2px 8px;
      border-radius: 3px;
      margin-bottom: 12px;
    }
    .news-badge .icon { width: 11px; height: 11px; }
    .news-badge.nuovo {
      background: var(--blue-light);
      color: var(--blue);
    }
    .news-badge.modificato {
      background: var(--amber-light);
      color: var(--amber);
    }
    .news-card h3 {
      font-family: 'DM Sans', sans-serif;
      font-weight: 600;
      font-size: 0.92rem;
      margin-bottom: 8px;
      line-height: 1.35;
    }
    .news-card p {
      font-size: 0.82rem;
      color: var(--ink-50);
      line-height: 1.55;
    }

    /* ============================================
       TESTIMONIALS
       ============================================ */
    .testimonials {
      padding: 80px 0;
      background: var(--warm-cream);
      border-bottom: 1px solid var(--warm-sand);
    }
    .testimonials-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 16px;
    }
    .test-card {
      background: #fff;
      border: 1px solid var(--ink-15);
      border-radius: var(--radius-lg);
      padding: 28px;
    }
    .test-stars {
      display: flex;
      gap: 2px;
      margin-bottom: 14px;
    }
    .test-stars .icon { width: 14px; height: 14px; color: var(--amber); }
    .test-quote {
      font-family: 'DM Serif Display', serif;
      font-style: italic;
      font-size: 0.92rem;
      line-height: 1.6;
      color: var(--ink-75);
      margin-bottom: 20px;
    }
    .test-divider {
      border: none;
      border-top: 1px solid var(--ink-15);
      margin: 0 0 16px;
    }
    .test-author {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .test-avatar {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      background: var(--blue-light);
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--blue);
    }
    .test-avatar .icon { width: 16px; height: 16px; }
    .test-name {
      font-weight: 600;
      font-size: 0.85rem;
      color: var(--ink);
    }
    .test-info {
      font-size: 0.75rem;
      color: var(--ink-30);
    }

    /* ============================================
       PRIVACY BAR
       ============================================ */
    .privacy {
      background: var(--blue);
      color: #fff;
      padding: 64px 0;
    }
    .privacy h2 {
      color: #fff;
      margin-bottom: 40px;
    }
    .privacy-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 32px;
    }
    .privacy-icon {
      width: 40px;
      height: 40px;
      border-radius: var(--radius);
      background: rgba(255,255,255,0.1);
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 14px;
      color: rgba(255,255,255,0.85);
    }
    .privacy-icon .icon { width: 20px; height: 20px; }
    .privacy-item h4 {
      font-family: 'DM Sans', sans-serif;
      font-weight: 600;
      font-size: 0.88rem;
      margin-bottom: 8px;
      color: #fff;
    }
    .privacy-item p {
      font-size: 0.82rem;
      line-height: 1.6;
      color: rgba(255,255,255,0.7);
    }

    /* ============================================
       CTA SECTION
       ============================================ */
    .cta-section {
      padding: 80px 0;
      text-align: center;
      background: var(--warm-cream);
      border-bottom: 1px solid var(--warm-sand);
    }
    .cta-section h2 { margin-bottom: 12px; }
    .cta-section p {
      font-size: 0.95rem;
      color: var(--ink-50);
      margin-bottom: 32px;
    }

    /* ============================================
       FOOTER
       ============================================ */
    .site-footer { background: var(--warm-cream); border-top: 1px solid var(--warm-sand); padding: 32px 0 24px; margin-top: 48px; }
    .site-footer .footer-inner { max-width: var(--max-w); margin: 0 auto; padding: 0 var(--gutter); text-align: center; }
    .footer-nav { display: flex; justify-content: center; gap: 16px; flex-wrap: wrap; margin-bottom: 20px; }
    .footer-nav a { font-size: 0.8rem; color: var(--ink-50); text-decoration: none; }
    .footer-nav a:hover { color: var(--blue); text-decoration: underline; }
    .footer-legal { margin-bottom: 16px; font-size: 0.75rem; color: var(--ink-30); line-height: 1.6; }
    .footer-brand { font-family: 'DM Serif Display', serif; font-size: 1rem; color: var(--blue); margin-bottom: 4px; }
    .footer-legal p { margin: 0; }
    .footer-email a { color: var(--blue-mid); text-decoration: none; }
    .footer-email a:hover { text-decoration: underline; }
    .footer-disclaimer { font-size: 0.7rem; color: var(--ink-30); line-height: 1.5; font-style: italic; }
    .footer-disclaimer p { margin: 2px 0; }

    /* === DISCLAIMER BOX === */
    .disclaimer-box{display:flex;align-items:flex-start;gap:10px;margin:16px 0 8px 0;padding:12px 16px;background:#FFFBEB;border:1px solid #F59E0B;border-left:4px solid #F59E0B;border-radius:6px}
    .disclaimer-icon{flex-shrink:0;font-size:1rem;line-height:1.5}
    .disclaimer-text{font-family:'DM Sans',sans-serif;font-size:.78rem;color:#92400E;line-height:1.5;margin:0}
    .disclaimer-text a{color:#B45309;text-decoration:underline;font-weight:600}
    .disclaimer-text a:hover{color:#92400E}
    .disclaimer-box--results{margin:0 0 20px 0}
    @media print{.disclaimer-box{border:1px solid #999!important;background:#f9f9f9!important;-webkit-print-color-adjust:exact;print-color-adjust:exact}}

    /* ============================================
       RESPONSIVE
       ============================================ */
    @media (max-width: 900px) {
      .hero-grid { grid-template-columns: 1fr; gap: 40px; }
      .proof-card { max-width: 400px; }
      .how-grid { grid-template-columns: 1fr 1fr; }
      .news-grid { grid-template-columns: 1fr 1fr; }
    }
    @media (max-width: 640px) {
      :root { --gutter: 20px; }
      .topbar-inner { justify-content: center; text-align: center; }
      .topbar-right { margin-left: 0; margin-top: 4px; width: 100%; text-align: center; }
      .main-nav { gap: 12px; }
      .nav-link { font-size: 0.78rem; }
      .hero { padding: 48px 0 40px; }
      .how-grid, .news-grid, .testimonials-grid, .privacy-grid { grid-template-columns: 1fr; }
      .estimate-row { grid-template-columns: 1fr; }
      .site-footer .footer-inner { text-align: center; }
      section, .how, .news, .testimonials, .privacy, .cta-section { padding: 56px 0; }
    }

    /* ============================================
       ANIMATIONS
       ============================================ */
    @keyframes fadeUp {
      from { opacity: 0; transform: translateY(16px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .hero-content > * {
      animation: fadeUp 0.5s ease both;
    }
    .hero-content > *:nth-child(1) { animation-delay: 0s; }
    .hero-content > *:nth-child(2) { animation-delay: 0.08s; }
    .hero-content > *:nth-child(3) { animation-delay: 0.16s; }
    .hero-content > *:nth-child(4) { animation-delay: 0.24s; }
    .hero-content > *:nth-child(5) { animation-delay: 0.32s; }
    .proof-card { animation: fadeUp 0.5s ease 0.2s both; }

    /* ============================================
       WIZARD PAGE (full-page view)
       ============================================ */
    .wizard-page { min-height: calc(100vh - 54px); background: var(--warm-cream); align-items: flex-start; justify-content: center; padding: 60px var(--gutter); }
    .wizard-container { width: 100%; max-width: 640px; }
    .wizard-card { background: #fff; border: 1px solid var(--ink-15); border-radius: var(--radius-lg); padding: 40px; box-shadow: var(--shadow-card); }
    .wizard-footer-note { display: flex; align-items: center; justify-content: center; gap: 6px; margin-top: 16px; font-size: 0.78rem; color: var(--ink-50); }
    .wizard-footer-note .icon { width: 14px; height: 14px; color: var(--ink-30); }
    .wizard-steps { display: flex; gap: 4px; margin-bottom: 32px; }
    .wizard-step-dot { flex: 1; height: 4px; border-radius: 2px; background: var(--ink-15); transition: background 0.2s; }
    .wizard-step-dot.active { background: var(--terra); }
    .wizard-step-dot.done { background: var(--green); }
    .wizard-step-title { font-family: 'DM Serif Display', serif; font-size: 1.3rem; margin-bottom: 4px; }
    .wizard-step-sub { font-size: 0.85rem; color: var(--ink-50); margin-bottom: 28px; }
    .wizard-panel { display: none; }
    .wizard-panel.active { display: block; }
    .wiz-row { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 16px; }
    .wiz-row.full { grid-template-columns: 1fr; }
    .wiz-field label { display: block; font-size: 0.7rem; font-weight: 600; letter-spacing: 0.06em; text-transform: uppercase; color: var(--ink-50); margin-bottom: 6px; }
    .wiz-field select, .wiz-field input[type="number"], .wiz-field input[type="text"] { width: 100%; height: 42px; border: 1px solid var(--ink-15); border-radius: var(--radius); padding: 0 12px; font-family: 'DM Sans', sans-serif; font-size: 0.88rem; color: var(--ink); background: #fff; }
    .wiz-field select { appearance: none; cursor: pointer; background-image: url("data:image/svg+xml,%3Csvg width='10' height='6' viewBox='0 0 10 6' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M1 1L5 5L9 1' stroke='%2376767C' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E"); background-repeat: no-repeat; background-position: right 12px center; }
    .wiz-field select:focus, .wiz-field input:focus { outline: none; border-color: var(--blue-mid); box-shadow: 0 0 0 3px var(--blue-glow); }
    .wiz-check { display: flex; align-items: center; gap: 10px; padding: 10px 0; cursor: pointer; font-size: 0.88rem; }
    .wiz-check input[type="checkbox"] { width: 18px; height: 18px; accent-color: var(--blue); cursor: pointer; }
    .wiz-nav { display: flex; justify-content: space-between; align-items: center; margin-top: 28px; }
    .wiz-nav .btn { min-width: 140px; justify-content: center; }
    .wizard-nav-right{display:flex;align-items:center;gap:12px}
    .turnstile-inline{display:flex;align-items:center}
    .turnstile-inline .cf-turnstile{transform:scale(0.85);transform-origin:right center}
    .turnstile-inline .cf-turnstile:empty{display:none}
    @media(max-width:600px){.wizard-nav-right{flex-direction:column;align-items:stretch}.turnstile-inline{justify-content:center}.turnstile-inline .cf-turnstile{transform:scale(1);transform-origin:center}}
    .btn-ghost { background: none; border: none; color: var(--ink-50); font-family: 'DM Sans', sans-serif; font-size: 0.88rem; font-weight: 600; cursor: pointer; padding: 13px 20px; border-radius: var(--radius); }
    .btn-ghost:hover { color: var(--ink); background: var(--ink-05); }
    .wiz-isee-upload { margin-top: 12px; padding: 16px; border: 2px dashed var(--ink-15); border-radius: var(--radius); text-align: center; font-size: 0.82rem; color: var(--ink-50); cursor: pointer; transition: all 0.15s; }
    .wiz-isee-upload:hover { border-color: var(--blue-mid); background: var(--blue-light); color: var(--blue); }
    .wiz-isee-upload input { display: none; }
    @media(max-width:640px) { .wiz-row { grid-template-columns: 1fr; } .wizard-card { padding: 28px 20px; } .wizard-page { padding: 32px var(--gutter); } }

    /* ============================================
       RESULTS PAGE
       ============================================ */
    .results-page { min-height: calc(100vh - 54px); padding: 60px 0; background: var(--warm-cream); }
    .results-hero { max-width: 600px; margin: 0 auto 24px; text-align: center; background: #fff; border: 1px solid var(--ink-15); border-radius: var(--radius-lg); padding: 40px 32px; position: relative; overflow: hidden; box-shadow: var(--shadow-card); }
    .results-hero::before { content: ''; position: absolute; top: 0; left: 0; right: 0; height: 3px; background: linear-gradient(90deg, var(--blue), var(--terra), var(--green)); }
    .results-hero h2 { margin-bottom: 8px; }
    .saving-amount { font-family: 'JetBrains Mono', monospace; font-size: 2.8rem; font-weight: 600; color: var(--green); line-height: 1; margin: 12px 0; }
    .bonus-count { display: inline-flex; align-items: center; gap: 6px; padding: 4px 14px; background: var(--green-light); border-radius: 20px; font-size: 0.85rem; font-weight: 600; color: var(--green); margin-top: 8px; }
    .results-actions { display: flex; gap: 8px; flex-wrap: wrap; justify-content: center; margin-bottom: 20px; max-width: 800px; margin-left: auto; margin-right: auto; }
    .action-btn { display: inline-flex; align-items: center; gap: 6px; padding: 8px 14px; border: 1px solid var(--ink-15); border-radius: var(--radius); background: #fff; color: var(--ink-75); font-family: 'DM Sans', sans-serif; font-size: 0.78rem; font-weight: 500; cursor: pointer; transition: all 0.15s; }
    .action-btn:hover { border-color: var(--blue); color: var(--blue); background: var(--blue-light); }
    .action-btn .icon { width: 14px; height: 14px; }
    .results-tabs { display: flex; gap: 2px; background: var(--ink-05); border-radius: var(--radius-lg); padding: 3px; margin-bottom: 24px; overflow-x: auto; -webkit-overflow-scrolling: touch; scrollbar-width: none; max-width: 800px; margin-left: auto; margin-right: auto; }
    .results-tabs::-webkit-scrollbar { display: none; }
    .tab-btn { display: flex; align-items: center; gap: 6px; padding: 8px 16px; border: none; border-radius: var(--radius); background: transparent; color: var(--ink-50); font-family: 'DM Sans', sans-serif; font-size: 0.82rem; font-weight: 500; cursor: pointer; white-space: nowrap; transition: all 0.15s; }
    .tab-btn:hover { color: var(--ink-75); background: rgba(255,255,255,0.5); }
    .tab-btn.active { background: #fff; color: var(--blue); font-weight: 600; box-shadow: var(--shadow-subtle); }
    .tab-btn .tab-icon { width: 16px; height: 16px; }
    .tab-btn .tab-count { display: inline-flex; align-items: center; justify-content: center; min-width: 18px; height: 18px; padding: 0 5px; border-radius: 9px; font-size: 0.68rem; font-weight: 700; font-family: 'JetBrains Mono', monospace; background: var(--ink-05); color: var(--ink-50); }
    .tab-btn.active .tab-count { background: var(--blue-light); color: var(--blue); }
    .bonus-grid { display: grid; gap: 12px; max-width: 800px; margin: 0 auto; }

    /* === BONUS CARD === */
    .bonus-card { background: #fff; border: 1px solid var(--ink-15); border-radius: var(--radius-lg); overflow: hidden; transition: box-shadow 0.2s; }
    .bonus-card:hover { box-shadow: var(--shadow-card); }
    .bonus-card-header { padding: 20px 24px 16px; }
    .bonus-title-row { display: flex; align-items: center; gap: 10px; margin-bottom: 2px; }
    .bonus-title-row .compat-dot { width: 10px; height: 10px; border-radius: 50%; flex-shrink: 0; }
    .compat-dot.high { background: var(--green); }
    .compat-dot.med { background: var(--amber); }
    .compat-dot.low { background: var(--ink-30); }
    .bonus-title-row .bonus-name { flex: 1; font-family: 'DM Sans', sans-serif; font-size: 1.05rem; font-weight: 700; color: var(--ink); line-height: 1.3; }
    .bonus-title-row .compat-badge { padding: 3px 10px; border-radius: 12px; font-family: 'JetBrains Mono', monospace; font-size: 0.72rem; font-weight: 700; flex-shrink: 0; }
    .compat-badge.high { background: #E9F5ED; color: var(--green); }
    .compat-badge.med { background: #FAF4E6; color: var(--amber); }
    .compat-badge.low { background: var(--ink-05); color: var(--ink-30); }
    .badge-regionale { display: inline-block; background: #F3E8FF; color: #6B21A8; font-size: 0.62rem; font-weight: 700; padding: 2px 6px; border-radius: 3px; text-transform: uppercase; letter-spacing: 0.03em; margin-left: 6px; vertical-align: middle; }
    .badge-scaduto { display: inline-flex; align-items: center; gap: 4px; padding: 2px 8px; background: #FEE2E2; color: #DC2626; font-family: 'DM Sans', sans-serif; font-size: 0.65rem; font-weight: 700; letter-spacing: 0.06em; text-transform: uppercase; border-radius: 3px; line-height: 1; margin-left: 6px; vertical-align: middle; }
    .bonus-meta-row { display: flex; align-items: center; gap: 8px; padding-left: 20px; margin-bottom: 14px; }
    .bonus-ente { font-size: 0.78rem; color: var(--ink-30); }
    .bonus-meta-sep { width: 3px; height: 3px; border-radius: 50%; background: var(--ink-15); }
    .bonus-scadenza { font-size: 0.72rem; color: var(--terra); font-weight: 600; }
    .bonus-scadenza.active { color: var(--ink-30); }
    .bonus-importo-box { margin: 0 24px 12px 44px; background: var(--warm-cream); border-radius: var(--radius); padding: 10px 16px; display: flex; align-items: baseline; flex-wrap: wrap; gap: 8px; }
    .importo-main { font-family: 'JetBrains Mono', monospace; font-size: 1.05rem; font-weight: 700; color: var(--green); }
    .importo-label { font-size: 0.62rem; font-weight: 700; text-transform: uppercase; letter-spacing: 0.06em; color: var(--green); background: #E9F5ED; padding: 2px 6px; border-radius: 3px; margin-left: auto; }
    .importo-range { width: 100%; font-size: 0.75rem; color: var(--ink-30); }
    .bonus-desc { padding: 0 24px 0 44px; font-size: 0.85rem; color: var(--ink-50); line-height: 1.6; margin-bottom: 4px; }
    .bonus-toggle { display: flex; align-items: center; gap: 6px; width: 100%; padding: 12px 24px; background: none; border: none; border-top: 1px solid var(--ink-15); color: var(--blue); font-family: 'DM Sans', sans-serif; font-size: 0.82rem; font-weight: 600; cursor: pointer; transition: background 0.15s; }
    .bonus-toggle:hover { background: var(--blue-light); }
    .bonus-toggle .chevron { width: 14px; height: 14px; transition: transform 0.2s; }
    .bonus-toggle.open .chevron { transform: rotate(180deg); }
    .bonus-details { display: none; padding: 0 24px 0 24px; }
    .bonus-details.show { display: block; }
    .bonus-toggle + .bonus-details::before { content: ''; display: block; height: 1px; background: var(--ink-15); margin: 0 0 16px 0; }
    .detail-section { background: none; border: none; border-radius: 0; padding: 0; margin-bottom: 16px; }
    .detail-section-title { font-family: 'DM Sans', sans-serif; font-size: 0.68rem; font-weight: 700; text-transform: uppercase; letter-spacing: 0.08em; color: var(--ink-30); margin-bottom: 8px; padding: 0; }
    .req-list { list-style: none; padding: 0; margin: 0; }
    .req-item { display: flex; align-items: start; gap: 10px; padding: 3px 0; font-size: 0.85rem; color: var(--ink-75); line-height: 1.5; }
    .req-item::before { content: ''; display: block; width: 16px; height: 16px; min-width: 16px; margin-top: 2px; border-radius: 50%; background: #E9F5ED url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3E%3Cpath d='M5 8.5l2 2 4-4' stroke='%232A6B45' stroke-width='1.5' fill='none' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E") center/16px; }
    .steps-list { list-style: none; padding: 0; margin: 0; }
    .step-item { display: flex; align-items: start; gap: 10px; padding: 3px 0; font-size: 0.85rem; color: var(--ink-75); line-height: 1.5; }
    .step-num { display: flex; align-items: center; justify-content: center; width: 20px; height: 20px; min-width: 20px; border-radius: 50%; background: var(--blue); color: #fff; font-family: 'JetBrains Mono', monospace; font-size: 0.68rem; font-weight: 700; margin-top: 0; }
    .doc-list { list-style: none; padding: 0; margin: 0; }
    .doc-item { display: flex; align-items: center; gap: 10px; padding: 4px 0; font-size: 0.85rem; color: var(--ink-75); cursor: pointer; user-select: none; transition: opacity 0.15s; }
    .doc-item:hover { opacity: 0.8; }
    .doc-checkbox { width: 18px; height: 18px; min-width: 18px; border: 1.5px solid var(--ink-15); border-radius: 4px; display: flex; align-items: center; justify-content: center; transition: all 0.15s; background: #fff; }
    .doc-item.checked .doc-checkbox { background: var(--green); border-color: var(--green); }
    .doc-item.checked .doc-checkbox::after { content: ''; display: block; width: 10px; height: 10px; background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 10 10'%3E%3Cpath d='M2 5l2.5 2.5L8 3' stroke='white' stroke-width='1.5' fill='none' stroke-linecap='round'/%3E%3C/svg%3E"); }
    .doc-item.checked .doc-label { text-decoration: line-through; color: var(--ink-30); }
    .faq-list { list-style: none; padding: 0; margin: 0; }
    .faq-item { border-bottom: 1px solid var(--ink-05, #F0F0F0); }
    .faq-item:last-child { border-bottom: none; }
    .faq-question { display: flex; align-items: center; justify-content: space-between; width: 100%; padding: 8px 0; background: none; border: none; font-family: 'DM Sans', sans-serif; font-size: 0.85rem; font-weight: 600; color: var(--ink-75); cursor: pointer; text-align: left; }
    .faq-question:hover { color: var(--blue); }
    .faq-question .faq-chevron { width: 12px; height: 12px; transition: transform 0.2s; flex-shrink: 0; color: var(--ink-30); }
    .faq-question.open .faq-chevron { transform: rotate(180deg); }
    .faq-answer { display: none; padding: 0 0 8px 0; font-size: 0.82rem; color: var(--ink-50); line-height: 1.6; }
    .faq-answer.show { display: block; }
    .bonus-card-footer { display: flex; align-items: center; justify-content: space-between; padding: 10px 24px; border-top: 1px solid var(--ink-05, #F0F0F0); gap: 8px; }
    .link-verified { display: flex; align-items: center; gap: 4px; font-size: 0.72rem; color: var(--green); white-space: nowrap; }
    .link-verified .icon { width: 14px; height: 14px; }
    .link-verified .date { color: var(--ink-30); }
    .link-warn-footer { display: flex; align-items: center; gap: 4px; font-size: 0.72rem; color: var(--amber); }
    .link-warn-footer .icon { width: 14px; height: 14px; }
    .btn-sito-ufficiale { display: inline-flex; align-items: center; gap: 6px; padding: 8px 16px; background: var(--blue); color: #fff; border: none; border-radius: var(--radius); font-family: 'DM Sans', sans-serif; font-size: 0.78rem; font-weight: 600; cursor: pointer; text-decoration: none; transition: background 0.15s; }
    .btn-sito-ufficiale:hover { background: var(--blue-mid); text-decoration: none; }
    .btn-sito-ufficiale .icon { width: 14px; height: 14px; }
    .bonus-verifica { margin-bottom: 10px; padding: 10px 14px; background: var(--amber-light); border-left: 3px solid var(--amber); border-radius: 0 var(--radius) var(--radius) 0; font-size: 0.78rem; color: var(--ink-75); display: flex; gap: 8px; align-items: flex-start; }
    .bonus-verifica a { color: var(--blue-mid); text-decoration: underline; }
    .results-modify { text-align: center; margin-top: 32px; }

    /* Expired bonus */
    .bonus-card--expired { opacity: 0.65; border-color: var(--ink-15); }
    .bonus-card--expired:hover { opacity: 0.8; }
    .bonus-card--expired .compat-dot { background: var(--ink-30) !important; }
    .bonus-card--expired .importo-main { color: var(--ink-30); text-decoration: line-through; }
    .bonus-card--expired .importo-label { display: none; }
    .expired-note { display: none; padding: 10px 24px; font-size: 0.78rem; color: var(--ink-30); text-align: center; font-style: italic; border-top: 1px solid var(--ink-15); background: var(--ink-05); }
    .bonus-card--expired .expired-note { display: flex; align-items: center; justify-content: center; gap: 6px; }
    .expired-separator { display: flex; align-items: center; gap: 12px; margin: 24px 0 16px; max-width: 800px; margin-left: auto; margin-right: auto; }
    .expired-separator-line { flex: 1; height: 1px; background: var(--ink-15); }
    .expired-separator-text { display: flex; align-items: center; gap: 4px; font-family: 'DM Sans', sans-serif; font-size: 0.75rem; font-weight: 600; color: var(--ink-30); text-transform: uppercase; letter-spacing: 0.05em; white-space: nowrap; }
    .expired-separator-text .icon { width: 14px; height: 14px; }
    .bonus-count-expired { display: inline-flex; align-items: center; gap: 4px; padding: 3px 10px; background: var(--ink-05); border-radius: 12px; font-size: 0.75rem; color: var(--ink-30); margin-top: 4px; }
    .tab-count--expired { background: #FEE2E2 !important; color: #DC2626 !important; }

    /* Print only elements */
    .print-only { display: none; }

    /* ============================================
       PRINT STYLESHEET
       ============================================ */
    @media print {
      * { -webkit-print-color-adjust: exact !important; print-color-adjust: exact !important; color-adjust: exact !important; }
      body { background: #fff !important; font-size: 10pt; line-height: 1.5; color: #333; }
      .site-header, .topbar, .results-actions, .results-tabs, .cookie-banner, .bonus-toggle, .btn-sito-ufficiale, .doc-checkbox, .faq-chevron, .wizard-footer-note, footer, .language-switcher, #landingPage, #wizardPage, .header { display: none !important; }
      .bonus-details { display: block !important; }
      .faq-answer { display: block !important; }
      .print-only { display: block !important; }
      .results-page, #resultsPage { display: block !important; max-width: 100% !important; padding: 0 !important; margin: 0 !important; min-height: auto !important; }
      .results-hero { border: 1.5pt solid #1B3A54 !important; border-radius: 6pt !important; padding: 16pt !important; margin-bottom: 16pt !important; page-break-after: avoid; text-align: center; max-width: 100% !important; }
      .results-hero::before { height: 2pt !important; background: #1B3A54 !important; }
      .saving-amount { font-size: 22pt !important; color: #2A6B45 !important; }
      .bonus-count { font-size: 9pt !important; }
      .bonus-grid { max-width: 100% !important; }
      .bonus-card { border: 1pt solid #ddd !important; border-radius: 4pt !important; margin-bottom: 10pt !important; page-break-inside: avoid; box-shadow: none !important; }
      .bonus-card-header { padding: 12pt 14pt 8pt !important; }
      .bonus-title-row .bonus-name { font-size: 11pt !important; }
      .compat-badge { border: 1pt solid currentColor !important; font-size: 7pt !important; padding: 1pt 6pt !important; }
      .bonus-importo-box { background: #F4F3EE !important; padding: 8pt 12pt !important; margin: 4pt 14pt 8pt 14pt !important; border-radius: 3pt !important; }
      .importo-main { font-size: 11pt !important; }
      .bonus-desc { font-size: 8.5pt !important; padding: 0 14pt 6pt !important; }
      .detail-section { background: none !important; border: none !important; padding: 0 !important; margin: 4pt 0 8pt !important; border-radius: 0 !important; }
      .detail-section-title { font-size: 7pt !important; margin-bottom: 4pt !important; }
      .req-item, .step-item, .doc-item { font-size: 8pt !important; padding: 2pt 0 !important; }
      .step-num { width: 14pt !important; height: 14pt !important; min-width: 14pt !important; font-size: 6pt !important; background: #1B3A54 !important; color: #fff !important; }
      .faq-question { font-size: 8.5pt !important; font-weight: 600; padding: 4pt 0 2pt !important; }
      .faq-answer { font-size: 8pt !important; padding: 0 0 4pt !important; }
      .bonus-card-footer { padding: 6pt 14pt !important; font-size: 7pt !important; }
      .bonus-card-footer a::after { content: " (" attr(href) ")"; font-size: 6pt; color: #999; word-break: break-all; }
      .bonus-scadenza { font-size: 7pt !important; border: 0.5pt solid #C0522E; padding: 1pt 4pt; border-radius: 2pt; }
      .bonus-card--expired { opacity: 0.5 !important; }
      .badge-scaduto { border: 1pt solid #DC2626 !important; background: #FEE2E2 !important; }
      .expired-separator { margin: 12pt 0 8pt !important; }
      .expired-note { display: flex !important; }
      .doc-item::before { content: '·'; display: inline; margin-right: 4pt; font-weight: bold; }
      .doc-checkbox { display: none !important; }
      .doc-item.checked .doc-label { text-decoration: none !important; color: inherit !important; }
      a { color: #2C5F7C !important; }
      h1, h2, h3, .results-hero { page-break-after: avoid; }
      .bonus-card, .detail-section { page-break-inside: avoid; }
      @page { margin: 15mm 12mm; size: A4; }
      @page :first { margin-top: 10mm; }
    }

    /* ============================================
       COOKIE BANNER
       ============================================ */
    .cookie-banner { position: fixed; bottom: 0; left: 0; right: 0; background: #fff; border-top: 1px solid var(--ink-15); box-shadow: 0 -4px 20px rgba(0,0,0,0.08); padding: 20px var(--gutter); z-index: 1000; }
    .cookie-inner { max-width: var(--max-w); margin: 0 auto; display: flex; align-items: center; gap: 20px; flex-wrap: wrap; }
    .cookie-text { flex: 1; min-width: 260px; font-size: 0.82rem; color: var(--ink-75); line-height: 1.55; }
    .cookie-text a { color: var(--blue-mid); text-decoration: underline; }
    .cookie-btns { display: flex; gap: 8px; flex-shrink: 0; }
    .cookie-btn { padding: 9px 20px; border-radius: var(--radius); font-family: 'DM Sans', sans-serif; font-size: 0.82rem; font-weight: 600; cursor: pointer; border: none; transition: all 0.15s; }
    .cookie-btn-accept { background: var(--blue); color: #fff; }
    .cookie-btn-accept:hover { background: var(--blue-mid); }
    .cookie-btn-reject { background: var(--ink-05); color: var(--ink-75); }
    .cookie-btn-reject:hover { background: var(--ink-15); }
    @media(max-width:640px) { .cookie-inner { flex-direction: column; text-align: center; } .cookie-btns { width: 100%; justify-content: center; } }

    /* Toast notifications */
    .toast-container{position:fixed;top:20px;right:20px;z-index:10000;display:flex;flex-direction:column;gap:10px;pointer-events:none}
    .toast{pointer-events:auto;display:flex;align-items:flex-start;gap:10px;background:#fff;border-radius:var(--radius-lg);padding:14px 16px;box-shadow:0 4px 20px rgba(0,0,0,0.12);border-left:4px solid var(--ink-30);max-width:380px;animation:toastIn .3s ease;position:relative}
    .toast--error{border-left-color:#dc2626}.toast--success{border-left-color:var(--green)}.toast--warning{border-left-color:#d97706}.toast--info{border-left-color:var(--blue-mid)}
    .toast-icon{font-size:1.1rem;flex-shrink:0;margin-top:1px}
    .toast-content{flex:1;min-width:0}
    .toast-title{font-weight:600;font-size:.88rem;margin-bottom:2px}
    .toast-msg{font-size:.82rem;color:var(--ink-75)}
    .toast-close{background:none;border:none;font-size:1.1rem;color:var(--ink-30);cursor:pointer;padding:0;line-height:1;flex-shrink:0}
    .toast-close:hover{color:var(--ink)}
    .toast.hiding{animation:toastOut .3s ease forwards}
    @keyframes toastIn{from{opacity:0;transform:translateX(40px)}to{opacity:1;transform:translateX(0)}}
    @keyframes toastOut{from{opacity:1;transform:translateX(0)}to{opacity:0;transform:translateX(40px)}}
    @media(max-width:640px){.toast-container{top:auto;bottom:20px;right:10px;left:10px}.toast{max-width:100%}}

    /* Required/optional field indicators */
    .required-mark{color:#dc2626;font-weight:700}
    .optional-label{color:var(--ink-30);font-weight:400;font-size:.78rem;margin-left:4px}
    .field-invalid{border-color:#dc2626!important;box-shadow:0 0 0 2px rgba(220,38,38,0.15)!important}
    .field-error{color:#dc2626;font-size:.78rem;margin-top:3px;display:block}

    /* Validity banners on bonus cards */
    .bonus-alert{padding:8px 14px;border-radius:var(--radius);font-size:.82rem;font-weight:600;margin:8px 0 4px;display:flex;align-items:center;gap:8px}
    .bonus-alert--warning{background:#fef3c7;color:#92400e;border:1px solid #fde68a}
    .bonus-alert--info{background:var(--blue-light);color:var(--blue);border:1px solid #bfdbfe}
    .bonus-alert--danger{background:#fee2e2;color:#991b1b;border:1px solid #fecaca}
  </style>
</head>
<body>
<a href="#main-content" class="skip-link">Vai al contenuto principale</a>
<!-- Google Tag Manager (noscript) -->
{{if .GTMID}}<noscript><iframe src="https://www.googletagmanager.com/ns.html?id={{.GTMID}}" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>{{end}}

<!-- ============================================
     SVG ICON SPRITE (hidden, referenced via <use>)
     ============================================ -->
<svg xmlns="http://www.w3.org/2000/svg" style="display:none" aria-hidden="true">
  <symbol id="ico-shield" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
  </symbol>
  <symbol id="ico-check-circle" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/>
  </symbol>
  <symbol id="ico-clock" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    <circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/>
  </symbol>
  <symbol id="ico-users" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/>
  </symbol>
  <symbol id="ico-edit" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/>
  </symbol>
  <symbol id="ico-zap" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/>
  </symbol>
  <symbol id="ico-list" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    <line x1="8" y1="6" x2="21" y2="6"/><line x1="8" y1="12" x2="21" y2="12"/><line x1="8" y1="18" x2="21" y2="18"/><line x1="3" y1="6" x2="3.01" y2="6"/><line x1="3" y1="12" x2="3.01" y2="12"/><line x1="3" y1="18" x2="3.01" y2="18"/>
  </symbol>
  <symbol id="ico-printer" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    <polyline points="6 9 6 2 18 2 18 9"/><path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"/><rect x="6" y="14" width="12" height="8"/>
  </symbol>
  <symbol id="ico-calc" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    <rect x="4" y="2" width="16" height="20" rx="2"/><line x1="8" y1="6" x2="16" y2="6"/><line x1="8" y1="10" x2="8" y2="10.01"/><line x1="12" y1="10" x2="12" y2="10.01"/><line x1="16" y1="10" x2="16" y2="10.01"/><line x1="8" y1="14" x2="8" y2="14.01"/><line x1="12" y1="14" x2="12" y2="14.01"/><line x1="16" y1="14" x2="16" y2="14.01"/><line x1="8" y1="18" x2="16" y2="18"/>
  </symbol>
  <symbol id="ico-arrow-right" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    <line x1="5" y1="12" x2="19" y2="12"/><polyline points="12 5 19 12 12 19"/>
  </symbol>
  <symbol id="ico-database-off" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    <ellipse cx="12" cy="5" rx="9" ry="3"/><path d="M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"/><path d="M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"/><line x1="2" y1="2" x2="22" y2="22"/>
  </symbol>
  <symbol id="ico-eye-off" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    <path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"/><line x1="1" y1="1" x2="23" y2="23"/>
  </symbol>
  <symbol id="ico-code" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    <polyline points="16 18 22 12 16 6"/><polyline points="8 6 2 12 8 18"/>
  </symbol>
  <symbol id="ico-star" viewBox="0 0 24 24" fill="currentColor" stroke="none">
    <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/>
  </symbol>
  <symbol id="ico-user" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/>
  </symbol>
  <symbol id="ico-external" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" y1="14" x2="21" y2="3"/>
  </symbol>
  <symbol id="ico-github" viewBox="0 0 24 24" fill="currentColor">
    <path d="M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0 0 24 12c0-6.63-5.37-12-12-12z"/>
  </symbol>
  <symbol id="ico-alert" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    <circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/><line x1="12" y1="16" x2="12.01" y2="16"/>
  </symbol>
  <symbol id="ico-file-text" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><polyline points="10 9 9 9 8 9"/>
  </symbol>
  <symbol id="ico-chevron-down" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    <polyline points="6 9 12 15 18 9"/>
  </symbol>
  <symbol id="ico-home" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/>
  </symbol>
  <symbol id="ico-wallet" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    <rect x="1" y="6" width="22" height="16" rx="2"/><path d="M1 10h22"/><path d="M1 6l5-4h12l5 4"/>
  </symbol>
</svg>

<!-- TOPBAR -->
<div class="topbar">
  <div class="topbar-inner">
    <span id="lastUpdate" data-i18n="topbar.updated">Dati aggiornati al ...</span>
    <span class="topbar-separator">&middot;</span>
    <span><span id="proofCounter">0</span> <span data-i18n="hero.counter_label">famiglie aiutate</span></span>
    <div class="topbar-right">
      <select id="langSelect" class="lang-select" aria-label="Lingua" onchange="selectLang(this.value)">
        <option value="it">Italiano</option>
        <option value="en">English</option>
        <option value="fr">Français</option>
        <option value="es">Español</option>
        <option value="ro">Română</option>
        <option value="ar">العربية</option>
        <option value="sq">Shqip</option>
      </select>
    </div>
  </div>
</div>

<!-- HEADER -->
<header class="site-header">
  <div class="container header-inner">
    <a href="/" class="logo" aria-label="BonusPerMe — Torna alla home">
      <div class="logo-mark">B</div>
      <span class="logo-text">BonusPerMe</span>
    </a>
    <nav class="main-nav" aria-label="Navigazione principale">
      <a href="/" class="nav-link active" data-i18n="nav.home">Home</a>
      <a href="/guide" class="nav-link" data-i18n="nav.guide">Guide</a>
      <a href="/per-caf" class="nav-link" data-i18n="nav.caf">Per i CAF</a>
      <a href="/contatti" class="nav-link" data-i18n="nav.contatti">Contatti</a>
    </nav>
  </div>
</header>

<!-- COOKIE BANNER -->
<div id="cookieBanner" class="cookie-banner" style="display:none">
  <div class="cookie-inner">
    <div class="cookie-text">
      Utilizziamo cookie tecnici e, con il tuo consenso, cookie analitici (Google Analytics) per migliorare il servizio.
      <a href="/cookie-policy">Cookie Policy</a> · <a href="/privacy">Privacy Policy</a>
    </div>
    <div class="cookie-btns">
      <button class="cookie-btn cookie-btn-accept" onclick="acceptCookies()">Accetta</button>
      <button class="cookie-btn cookie-btn-reject" onclick="rejectCookies()">Rifiuta</button>
    </div>
  </div>
</div>

<!-- LANDING PAGE -->
<div id="landingPage">

<!-- HERO -->
<section class="hero" id="main-content">
  <div class="container hero-grid">
    <div class="hero-content">
      <div class="label hero-pretitle">
        <span class="icon icon-sm"><svg><use href="#ico-check-circle"/></svg></span>
        <span data-i18n="hero.pretitle">Verifica gratuita</span>
      </div>
      <h1 data-i18n="hero.title">Scopri in 2 minuti a quali bonus hai diritto</h1>
      <p class="hero-subtitle" data-i18n="hero.subtitle">
        Confrontiamo la tua situazione con oltre 40 bonus statali e regionali attivi in Italia.
        Gratis, anonimo, senza registrazione.
      </p>
      <div class="hero-cta-row">
        <button class="btn btn-primary" onclick="startWizard()">
          <span data-i18n="hero.cta">Inizia la verifica</span>
          <span class="icon icon-sm"><svg><use href="#ico-arrow-right"/></svg></span>
        </button>
      </div>
      <div class="hero-meta">
                <span class="hero-meta-item">
                    <span class="icon"><svg><use href="#ico-clock"/></svg></span> 2 minuti
                </span>
        <span class="hero-meta-item">
                    <span class="icon"><svg><use href="#ico-edit"/></svg></span> 4 domande
                </span>
        <span class="hero-meta-item">
                    <span class="icon"><svg><use href="#ico-shield"/></svg></span> Nessuna registrazione
                </span>
      </div>
    </div>

    <div class="proof-card">
      <div class="proof-number" id="proofCounterHero">14.335</div>
      <div class="proof-label" data-i18n="hero.counter_label">famiglie aiutate</div>
      <hr class="proof-divider">
      <p class="proof-quote">
        Secondo i dati INPS, ogni anno restano non richiesti
        circa 2,1 miliardi di euro in bonus familiari.
      </p>
      <p class="proof-source">
        <span class="icon"><svg><use href="#ico-file-text"/></svg></span>
        Fonte: Osservatorio INPS sull'Assegno Unico, 2026
      </p>
    </div>
  </div>
</section>

<!-- QUICK ESTIMATE -->
<section class="estimate">
  <div class="container estimate-inner">
    <div class="estimate-title">
      <span class="icon icon-lg"><svg><use href="#ico-calc"/></svg></span>
      <h3>Stima veloce</h3>
    </div>
    <p class="estimate-sub">Quanto potresti ricevere ogni anno?</p>
    <div class="estimate-row">
      <div class="estimate-field">
        <label>
          <span class="icon"><svg><use href="#ico-users"/></svg></span>
          Numero figli
        </label>
        <select id="est-figli">
          <option value="0">Nessun figlio</option>
          <option value="1">1 figlio</option>
          <option value="2" selected>2 figli</option>
          <option value="3">3 figli</option>
          <option value="4">4+ figli</option>
        </select>
      </div>
      <div class="estimate-field">
        <label>
          <span class="icon"><svg><use href="#ico-wallet"/></svg></span>
          Fascia ISEE
        </label>
        <select id="est-isee">
          <option value="sotto15k" selected>Sotto €15.000</option>
          <option value="15-25k">€15.000 — €25.000</option>
          <option value="25-40k">€25.000 — €40.000</option>
          <option value="sopra40k">Sopra €40.000</option>
          <option value="noisee">Non ho l'ISEE</option>
        </select>
      </div>
    </div>
    <div class="estimate-result">
      <span class="icon"><svg><use href="#ico-check-circle"/></svg></span>
      <div class="estimate-amount" id="est-result">Fino a €8.400/anno</div>
    </div>
    <p class="estimate-note">Stima indicativa basata su dati medi nazionali · Verifica con i tuoi dati reali</p>
  </div>
</section>

<!-- HOW IT WORKS -->
<section class="how">
  <div class="container">
    <div class="section-header">
      <h2 data-i18n="how.title">Come funziona</h2>
      <p data-i18n="how.subtitle">Dalla verifica al CAF in 4 passaggi.</p>
    </div>
    <div class="how-grid">
      <div class="how-card">
        <div class="how-icon-row">
          <div class="how-card-icon step-1"><span class="icon"><svg><use href="#ico-edit"/></svg></span></div>
          <span class="how-num">01</span>
        </div>
        <h3 data-i18n="how.step1.title">Inserisci i dati</h3>
        <p data-i18n="how.step1.desc">Età, famiglia, ISEE e situazione abitativa. Solo l'essenziale, niente di più.</p>
      </div>
      <div class="how-card">
        <div class="how-icon-row">
          <div class="how-card-icon step-2"><span class="icon"><svg><use href="#ico-zap"/></svg></span></div>
          <span class="how-num">02</span>
        </div>
        <h3 data-i18n="how.step2.title">Analisi istantanea</h3>
        <p data-i18n="how.step2.desc">Confrontiamo la tua situazione con tutti i bonus attivi, nazionali e regionali.</p>
      </div>
      <div class="how-card">
        <div class="how-icon-row">
          <div class="how-card-icon step-3"><span class="icon"><svg><use href="#ico-list"/></svg></span></div>
          <span class="how-num">03</span>
        </div>
        <h3 data-i18n="how.step3.title">Risultati chiari</h3>
        <p data-i18n="how.step3.desc">Lista personalizzata con importi, requisiti e istruzioni passo per passo.</p>
      </div>
      <div class="how-card">
        <div class="how-icon-row">
          <div class="how-card-icon step-4"><span class="icon"><svg><use href="#ico-printer"/></svg></span></div>
          <span class="how-num">04</span>
        </div>
        <h3 data-i18n="how.step4.title">Porta al CAF</h3>
        <p data-i18n="how.step4.desc">Stampa il report con documenti e fonti ufficiali. Il patronato fa il resto.</p>
      </div>
    </div>
  </div>
</section>

<!-- NEWS -->
<section class="news">
  <div class="container">
    <div class="section-header">
      <h2>Novità 2026</h2>
      <p>Le misure nuove o confermate dalla Legge di Bilancio 2026.</p>
    </div>
    <div class="news-grid">
      <div class="news-card">
                <span class="news-badge modificato">
                    <span class="icon"><svg><use href="#ico-alert"/></svg></span> Modificato
                </span>
        <h3>Bonus Mamme potenziato</h3>
        <p>Sale da €40 a €60/mese per lavoratrici con 2+ figli e reddito fino a €40.000. Totale €720/anno esentasse.</p>
      </div>
      <div class="news-card">
                <span class="news-badge modificato">
                    <span class="icon"><svg><use href="#ico-alert"/></svg></span> Modificato
                </span>
        <h3>Nuovo ISEE 2026</h3>
        <p>Prima casa pesa meno: franchigia da €52.500 a €91.500. Più famiglie accedono ai bonus.</p>
      </div>
      <div class="news-card">
                <span class="news-badge nuovo">
                    <span class="icon"><svg><use href="#ico-zap"/></svg></span> Nuovo
                </span>
        <h3>Carta Dedicata a Te</h3>
        <p>Rifinanziata: €500 per famiglie con ISEE fino a €15.000 per beni alimentari di prima necessità.</p>
      </div>
      <div class="news-card">
                <span class="news-badge modificato">
                    <span class="icon"><svg><use href="#ico-alert"/></svg></span> Modificato
                </span>
        <h3>Bonus Ristrutturazione</h3>
        <p>Confermato al 50% prima casa, 36% seconde case. Tetto €96.000. Dal 2027 scende ancora.</p>
      </div>
      <div class="news-card">
                <span class="news-badge nuovo">
                    <span class="icon"><svg><use href="#ico-zap"/></svg></span> Nuovo
                </span>
        <h3>Bonus Nuovi Nati</h3>
        <p>Confermato: fino a €1.000 per nascita o adozione. ISEE esteso fino a €40.000.</p>
      </div>
      <div class="news-card">
                <span class="news-badge modificato">
                    <span class="icon"><svg><use href="#ico-alert"/></svg></span> Modificato
                </span>
        <h3>IRPEF al 33%</h3>
        <p>Aliquota del secondo scaglione scende dal 35% al 33% per redditi €28.000–€50.000.</p>
      </div>
    </div>
  </div>
</section>

<!-- TESTIMONIALS -->
<section class="testimonials">
  <div class="container">
    <div class="section-header">
      <h2 data-i18n="testimonials.title">Cosa dicono le famiglie</h2>
    </div>
    <div class="testimonials-grid">
      <div class="test-card">
        <div class="test-stars">
          <span class="icon"><svg><use href="#ico-star"/></svg></span>
          <span class="icon"><svg><use href="#ico-star"/></svg></span>
          <span class="icon"><svg><use href="#ico-star"/></svg></span>
          <span class="icon"><svg><use href="#ico-star"/></svg></span>
          <span class="icon"><svg><use href="#ico-star"/></svg></span>
        </div>
        <p class="test-quote">Non sapevamo di avere diritto all'Assegno Unico con quell'importo. Abbiamo scoperto 4 bonus e risparmiamo oltre 3.200 euro l'anno.</p>
        <hr class="test-divider">
        <div class="test-author">
          <div class="test-avatar"><span class="icon"><svg><use href="#ico-user"/></svg></span></div>
          <div>
            <div class="test-name">Maria R.</div>
            <div class="test-info">Roma · famiglia con 2 figli</div>
          </div>
        </div>
      </div>
      <div class="test-card">
        <div class="test-stars">
          <span class="icon"><svg><use href="#ico-star"/></svg></span>
          <span class="icon"><svg><use href="#ico-star"/></svg></span>
          <span class="icon"><svg><use href="#ico-star"/></svg></span>
          <span class="icon"><svg><use href="#ico-star"/></svg></span>
          <span class="icon"><svg><use href="#ico-star"/></svg></span>
        </div>
        <p class="test-quote">Ho caricato l'ISEE, risposto a 4 domande, e in 2 minuti avevo tutto chiaro. Ho stampato il report e l'ho portato al CAF.</p>
        <hr class="test-divider">
        <div class="test-author">
          <div class="test-avatar"><span class="icon"><svg><use href="#ico-user"/></svg></span></div>
          <div>
            <div class="test-name">Ahmed K.</div>
            <div class="test-info">Milano · lavoratore dipendente</div>
          </div>
        </div>
      </div>
      <div class="test-card">
        <div class="test-stars">
          <span class="icon"><svg><use href="#ico-star"/></svg></span>
          <span class="icon"><svg><use href="#ico-star"/></svg></span>
          <span class="icon"><svg><use href="#ico-star"/></svg></span>
          <span class="icon"><svg><use href="#ico-star"/></svg></span>
          <span class="icon"><svg><use href="#ico-star"/></svg></span>
        </div>
        <p class="test-quote">Il mio CAF non mi aveva parlato del Bonus Psicologo. Qui l'ho trovato subito con tutti i documenti necessari.</p>
        <hr class="test-divider">
        <div class="test-author">
          <div class="test-avatar"><span class="icon"><svg><use href="#ico-user"/></svg></span></div>
          <div>
            <div class="test-name">Giulia T.</div>
            <div class="test-info">Napoli · studentessa</div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- PRIVACY -->
<section class="privacy">
  <div class="container">
    <h2 data-i18n="privacy.title">I tuoi dati restano tuoi</h2>
    <div class="privacy-grid">
      <div class="privacy-item">
        <div class="privacy-icon"><span class="icon"><svg><use href="#ico-database-off"/></svg></span></div>
        <h4 data-i18n="privacy.db_title">Nessun database</h4>
        <p data-i18n="privacy.db_desc">I dati esistono solo nella tua sessione browser. Al refresh della pagina, spariscono. Non salviamo nulla.</p>
      </div>
      <div class="privacy-item">
        <div class="privacy-icon"><span class="icon"><svg><use href="#ico-eye-off"/></svg></span></div>
        <h4 data-i18n="privacy.track_title">Privacy first</h4>
        <p data-i18n="privacy.track_desc">Usiamo solo Google Analytics anonimo, e solo con il tuo consenso. Nessun cookie di profilazione.</p>
      </div>
      <div class="privacy-item">
        <div class="privacy-icon"><span class="icon"><svg><use href="#ico-code"/></svg></span></div>
        <h4 data-i18n="privacy.code_title">Codice aperto</h4>
        <p data-i18n="privacy.code_desc">Il sorgente è su GitHub sotto licenza AGPL-3.0. Chiunque può verificare cosa fa il codice.</p>
      </div>
    </div>
  </div>
</section>

<!-- CTA FINALE -->
<section class="cta-section">
  <div class="container">
    <h2 data-i18n="cta.title">Scopri quanto potresti risparmiare</h2>
    <p data-i18n="cta.subtitle">In 2 minuti sai esattamente a quali bonus hai diritto e come fare domanda.</p>
    <button class="btn btn-primary" onclick="startWizard()">
      <span data-i18n="hero.cta">Inizia la verifica gratuita</span>
      <span class="icon icon-sm"><svg><use href="#ico-arrow-right"/></svg></span>
    </button>
  </div>
</section>

<!-- FOOTER -->
<footer class="site-footer" role="contentinfo">
  <div class="footer-inner">
    <nav class="footer-nav" aria-label="Navigazione footer">
      <a href="/" data-i18n="nav.home">Home</a>
      <a href="/guide" data-i18n="nav.guide">Guide</a>
      <a href="/per-caf" data-i18n="nav.caf">Per i CAF</a>
      <a href="/contatti" data-i18n="nav.contatti">Contatti</a>
      <a href="/privacy">Privacy Policy</a>
      <a href="/cookie-policy">Cookie Policy</a>
    </nav>
    <div class="footer-legal">
      <p class="footer-brand">BonusPerMe</p>
      <p>Simone Nogara</p>
      <p>P.IVA 03817020138 &middot; C.F. NGRSMN91P14C933V</p>
      <p>Via Morazzone 4, 22100 Como (CO), Italia</p>
      <p class="footer-email"><a href="mailto:info@bonusperme.it">info@bonusperme.it</a></p>
    </div>
    <div class="footer-disclaimer">
      <p data-i18n="footer.disclaimer">Questo servizio è a scopo orientativo e non sostituisce la consulenza di un professionista, CAF o patronato.</p>
      <p>Progetto gratuito e open source &middot; <a href="https://github.com/nogarasimone/bonusperme" style="color:var(--blue-mid)">GitHub</a></p>
    </div>
  </div>
</footer>

</div><!-- /landingPage -->

<!-- WIZARD PAGE -->
<div id="wizardPage" class="wizard-page" style="display:none">
  <div class="wizard-container">
    <div class="wizard-card" role="form" aria-label="Verifica bonus">
      <div class="wizard-steps" role="progressbar" aria-valuenow="1" aria-valuemin="1" aria-valuemax="4" aria-label="Progresso: step 1 di 4" id="wizProgress">
        <div class="wizard-step-dot active" data-step="0"></div>
        <div class="wizard-step-dot" data-step="1"></div>
        <div class="wizard-step-dot" data-step="2"></div>
        <div class="wizard-step-dot" data-step="3"></div>
      </div>

      <!-- Step 1: Personal -->
      <div class="wizard-panel active" data-panel="0">
        <h2 class="wizard-step-title" data-i18n="step1.title">Dati personali</h2>
        <p class="wizard-step-sub" data-i18n="step1.subtitle">Informazioni di base per la verifica.</p>
        <div class="wiz-row">
          <div class="wiz-field">
            <label for="wiz-eta" data-i18n="label.eta">Età <span class="required-mark">*</span></label>
            <input type="number" id="wiz-eta" min="18" max="120" value="35" placeholder="Es. 35" aria-required="true">
          </div>
          <div class="wiz-field">
            <label for="wiz-stato-civile" data-i18n="label.stato_civile">Stato civile <span class="required-mark">*</span></label>
            <select id="wiz-stato-civile">
              <option value="" data-i18n="opt.select">— Seleziona —</option>
              <option value="celibe/nubile" data-i18n="opt.single">Celibe / Nubile</option>
              <option value="coniugato/a" data-i18n="opt.married">Coniugato/a</option>
              <option value="convivente" data-i18n="opt.cohabiting">Convivente</option>
              <option value="separato/a" data-i18n="opt.separated">Separato/a</option>
              <option value="divorziato/a" data-i18n="opt.separated">Divorziato/a</option>
              <option value="vedovo/a" data-i18n="opt.widowed">Vedovo/a</option>
            </select>
          </div>
        </div>
        <div class="wiz-row">
          <div class="wiz-field">
            <label for="wiz-occupazione" data-i18n="label.occupazione">Occupazione <span class="required-mark">*</span></label>
            <select id="wiz-occupazione">
              <option value="" data-i18n="opt.select">— Seleziona —</option>
              <option value="dipendente" data-i18n="opt.employee">Dipendente</option>
              <option value="autonomo" data-i18n="opt.selfemployed">Autonomo</option>
              <option value="pensionato" data-i18n="opt.retired">Pensionato</option>
              <option value="disoccupato" data-i18n="opt.unemployed">Disoccupato</option>
              <option value="casalinga" data-i18n="opt.inactive">Casalinga</option>
              <option value="studente" data-i18n="opt.student">Studente</option>
            </select>
          </div>
          <div class="wiz-field" style="display:flex;align-items:flex-end">
            <label class="wiz-check">
              <input type="checkbox" id="wiz-studente"> <span data-i18n="label.studente">Studente universitario</span>
            </label>
          </div>
        </div>
        <div class="wiz-nav">
          <button class="btn-ghost" onclick="backToLanding()" data-i18n="btn.prev">Indietro</button>
          <button class="btn btn-primary" onclick="wizNext()">
            <span data-i18n="btn.next">Avanti</span>
            <span class="icon icon-sm"><svg><use href="#ico-arrow-right"/></svg></span>
          </button>
        </div>
      </div>

      <!-- Step 2: Family -->
      <div class="wizard-panel" data-panel="1">
        <h2 class="wizard-step-title" data-i18n="step2.title">Nucleo familiare</h2>
        <p class="wizard-step-sub" data-i18n="step2.subtitle">Composizione della tua famiglia.</p>
        <div class="wiz-row">
          <div class="wiz-field">
            <label for="wiz-figli" data-i18n="label.numero_figli">Numero figli <span class="required-mark">*</span></label>
            <input type="number" id="wiz-figli" min="0" max="20" value="0">
          </div>
          <div class="wiz-field">
            <label for="wiz-figli-min" data-i18n="label.figli_minorenni">Figli minorenni <span class="optional-label">(opzionale)</span></label>
            <input type="number" id="wiz-figli-min" min="0" max="20" value="0">
          </div>
        </div>
        <div class="wiz-row">
          <div class="wiz-field">
            <label for="wiz-figli-u3" data-i18n="label.figli_under3">Figli under 3 anni <span class="optional-label">(opzionale)</span></label>
            <input type="number" id="wiz-figli-u3" min="0" max="20" value="0">
          </div>
          <div class="wiz-field">
            <label for="wiz-figli-u1">Figli sotto 1 anno <span class="optional-label">(opzionale)</span></label>
            <input type="number" id="wiz-figli-u1" min="0" max="20" value="0">
          </div>
        </div>
        <div class="wiz-row">
          <div class="wiz-field">
            <label for="wiz-figli-18-21">Figli 18-21 anni <span class="optional-label">(opzionale)</span></label>
            <input type="number" id="wiz-figli-18-21" min="0" max="20" value="0">
          </div>
          <div class="wiz-field">
            <label for="wiz-over65" data-i18n="label.over65">Over 65 nel nucleo <span class="optional-label">(opzionale)</span></label>
            <input type="number" id="wiz-over65" min="0" max="10" value="0">
          </div>
        </div>
        <div class="wiz-row">
          <div class="wiz-field">
            <label for="wiz-figli-disabili">Figli con disabilità certificata <span class="optional-label">(opzionale)</span></label>
            <input type="number" id="wiz-figli-disabili" min="0" max="20" value="0">
          </div>
          <div class="wiz-field" id="wiz-disabilita-figli-wrap" style="display:none">
            <label for="wiz-disabilita-figli">Grado disabilità figli</label>
            <select id="wiz-disabilita-figli">
              <option value="">Nessuna</option>
              <option value="media">Media</option>
              <option value="grave">Grave</option>
              <option value="non_autosufficienza">Non autosufficienza</option>
            </select>
          </div>
        </div>
        <label class="wiz-check">
          <input type="checkbox" id="wiz-dual-income"> <span>Entrambi i genitori lavorano?</span>
        </label>
        <label class="wiz-check">
          <input type="checkbox" id="wiz-disabilita"> <span data-i18n="label.disabilita">Componente con disabilità nel nucleo</span>
        </label>
        <label class="wiz-check">
          <input type="checkbox" id="wiz-madre-u21"> <span>Madre under 21?</span>
        </label>
        <label class="wiz-check">
          <input type="checkbox" id="wiz-nuovo-nato"> <span data-i18n="label.nuovo_nato">Nuovo nato nel 2026</span>
        </label>
        <div class="wiz-nav">
          <button class="btn-ghost" onclick="wizPrev()" data-i18n="btn.prev">Indietro</button>
          <button class="btn btn-primary" onclick="wizNext()">
            <span data-i18n="btn.next">Avanti</span>
            <span class="icon icon-sm"><svg><use href="#ico-arrow-right"/></svg></span>
          </button>
        </div>
      </div>

      <!-- Step 3: Housing -->
      <div class="wizard-panel" data-panel="2">
        <h2 class="wizard-step-title" data-i18n="step4.title">Situazione abitativa</h2>
        <p class="wizard-step-sub" data-i18n="step4.subtitle">Residenza e condizione casa.</p>
        <div class="wiz-row full">
          <div class="wiz-field">
            <label for="wiz-residenza" data-i18n="label.regione">Regione di residenza <span class="required-mark">*</span></label>
            <select id="wiz-residenza">
              <option value="">— Seleziona regione —</option>
              <option value="Abruzzo">Abruzzo</option>
              <option value="Basilicata">Basilicata</option>
              <option value="Calabria">Calabria</option>
              <option value="Campania">Campania</option>
              <option value="Emilia-Romagna">Emilia-Romagna</option>
              <option value="Friuli Venezia Giulia">Friuli Venezia Giulia</option>
              <option value="Lazio">Lazio</option>
              <option value="Liguria">Liguria</option>
              <option value="Lombardia">Lombardia</option>
              <option value="Marche">Marche</option>
              <option value="Molise">Molise</option>
              <option value="Piemonte">Piemonte</option>
              <option value="Puglia">Puglia</option>
              <option value="Sardegna">Sardegna</option>
              <option value="Sicilia">Sicilia</option>
              <option value="Toscana">Toscana</option>
              <option value="Trentino-Alto Adige">Trentino-Alto Adige</option>
              <option value="Umbria">Umbria</option>
              <option value="Valle d'Aosta">Valle d'Aosta</option>
              <option value="Veneto">Veneto</option>
            </select>
          </div>
        </div>
        <label class="wiz-check">
          <input type="checkbox" id="wiz-affittuario"> <span data-i18n="label.affittuario">Sono in affitto</span>
        </label>
        <label class="wiz-check">
          <input type="checkbox" id="wiz-prima-abitazione"> <span data-i18n="label.prima_casa">Prima abitazione di proprietà</span>
        </label>
        <label class="wiz-check">
          <input type="checkbox" id="wiz-ristrutturazione"> <span data-i18n="label.ristrutturazione">Ristrutturazione casa in corso / prevista</span>
        </label>
        <div class="wiz-nav">
          <button class="btn-ghost" onclick="wizPrev()" data-i18n="btn.prev">Indietro</button>
          <button class="btn btn-primary" onclick="wizNext()">
            <span data-i18n="btn.next">Avanti</span>
            <span class="icon icon-sm"><svg><use href="#ico-arrow-right"/></svg></span>
          </button>
        </div>
      </div>

      <!-- Step 4: Income -->
      <div class="wizard-panel" data-panel="3">
        <h2 class="wizard-step-title" data-i18n="step3.title">Situazione economica</h2>
        <p class="wizard-step-sub" data-i18n="step3.subtitle">ISEE e reddito. Se non hai l'ISEE lascia 0.</p>
        <div class="wiz-row">
          <div class="wiz-field">
            <label for="wiz-isee" data-i18n="label.isee">ISEE annuo (EUR) <span class="optional-label">(opzionale)</span></label>
            <input type="number" id="wiz-isee" min="0" max="500000" value="0" step="100" placeholder="Es. 15000">
          </div>
          <div class="wiz-field">
            <label for="wiz-reddito" data-i18n="label.reddito">Reddito annuo (EUR) <span class="optional-label">(opzionale)</span></label>
            <input type="number" id="wiz-reddito" min="0" max="1000000" value="0" step="100" placeholder="Es. 25000">
          </div>
        </div>
        <div class="wiz-isee-upload" id="iseeUploadZone">
          <input type="file" id="iseeFile" accept=".pdf">
          <span class="icon icon-sm"><svg><use href="#ico-file-text"/></svg></span>
          <span data-i18n="isee.upload">Hai il PDF dell'ISEE? Trascinalo qui o clicca per caricarlo</span>
          <div id="iseeUploadStatus" style="margin-top:8px;font-weight:600;display:none"></div>
        </div>
        <div class="wiz-nav">
          <button class="btn-ghost" onclick="wizPrev()" data-i18n="btn.prev">Indietro</button>
          <div class="wizard-nav-right">
            <button class="btn btn-primary" onclick="wizSubmit()" id="wizSubmitBtn">
              <span class="icon icon-sm"><svg><use href="#ico-zap"/></svg></span>
              <span data-i18n="btn.submit">Verifica bonus</span>
            </button>
          </div>
        </div>
        <div class="disclaimer-box" data-i18n-html="disclaimer_form">
          <span class="disclaimer-icon" aria-hidden="true">⚠️</span>
          <p class="disclaimer-text">BonusPerMe è uno strumento orientativo e potrebbe contenere errori o informazioni non aggiornate. Non sostituisce la consulenza di un CAF, patronato o professionista. Verifica sempre le informazioni sui <a href="https://www.inps.it" target="_blank" rel="noopener">siti ufficiali</a> prima di presentare domanda.</p>
        </div>
      </div>
    </div>
    {{if .TurnstileSiteKey}}<div id="turnstile-wiz" class="cf-turnstile" data-sitekey="{{.TurnstileSiteKey}}" data-callback="onTurnstileSuccess" data-theme="light" data-size="normal" style="display:flex;justify-content:center;margin:16px 0"></div>{{end}}
    <p class="wizard-footer-note">
      <span class="icon"><svg><use href="#ico-shield"/></svg></span>
      I tuoi dati non vengono salvati
    </p>
  </div>
</div><!-- /wizardPage -->

<!-- RESULTS PAGE -->
<div id="resultsPage" class="results-page" style="display:none">
  <div class="container">
    <!-- Print header (hidden on screen, visible in print) -->
    <div class="print-only" style="display:none;padding:0 0 12pt 0;border-bottom:2pt solid #1B3A54;margin-bottom:16pt;">
      <div style="display:flex;align-items:center;justify-content:space-between;">
        <div>
          <div style="font-family:'DM Serif Display',serif;font-size:16pt;font-weight:700;color:#1B3A54;">BonusPerMe</div>
          <div style="font-size:8pt;color:#666;">Report Personalizzato</div>
        </div>
        <div style="font-size:8pt;color:#999;text-align:right;">
          Generato il <span id="printDate"></span><br>
          bonusperme.it &middot; Documento a scopo orientativo
        </div>
      </div>
    </div>

    <div class="results-hero" id="resultsHero">
      <h2 id="results-title" data-i18n="results.title">I tuoi bonus</h2>
      <div class="saving-amount" id="results-saving"></div>
      <div class="bonus-count" id="results-count"></div>
    </div>
    <div class="results-actions">
      <button class="action-btn" onclick="downloadReport('print')">
        <span class="icon"><svg><use href="#ico-printer"/></svg></span> <span data-i18n="results.print">Stampa</span>
      </button>
      <button class="action-btn" onclick="downloadReport('download')">
        <span class="icon"><svg><use href="#ico-file-text"/></svg></span> <span data-i18n="results.pdf">PDF</span>
      </button>
      <button class="action-btn" onclick="exportCalendar()">
        <span class="icon"><svg><use href="#ico-clock"/></svg></span> <span data-i18n="results.calendar">Scadenze</span>
      </button>
      <button class="action-btn" onclick="shareWhatsApp()">
        <span class="icon"><svg><use href="#ico-external"/></svg></span> <span data-i18n="results.share">Condividi</span>
      </button>
    </div>
    <div class="disclaimer-box disclaimer-box--results" data-i18n-html="disclaimer_results">
      <span class="disclaimer-icon" aria-hidden="true">⚠️</span>
      <p class="disclaimer-text">Questi risultati sono orientativi. Importi, requisiti e scadenze potrebbero essere cambiati. Verifica sempre sui siti ufficiali (<a href="https://www.inps.it" target="_blank" rel="noopener">INPS</a>, <a href="https://www.agenziaentrate.gov.it" target="_blank" rel="noopener">Agenzia delle Entrate</a>, Regione) prima di fare domanda.</p>
    </div>
    <div class="results-tabs" id="resultsTabs"></div>
    <div class="bonus-grid" id="bonusGrid"></div>
    <div class="results-modify">
      <button class="btn btn-outline" onclick="backToWizard()">
        <span class="icon icon-sm"><svg><use href="#ico-edit"/></svg></span>
        <span data-i18n="btn.modify">Modifica dati</span>
      </button>
    </div>

    <!-- Print footer (hidden on screen, visible in print) -->
    <div class="print-only" style="display:none;margin-top:20pt;padding-top:10pt;border-top:1pt solid #ddd;font-size:7pt;color:#999;text-align:center;">
      BonusPerMe &middot; bonusperme.it &middot; info@bonusperme.it<br>
      Simone Nogara &middot; P.IVA 03817020138 &middot; Via Morazzone 4, 22100 Como (CO)<br>
      Questo documento a scopo orientativo e non sostituisce la consulenza professionale.
    </div>
  </div>
</div><!-- /resultsPage -->

<script>
  /* Language switcher */
  var currentLang = 'it';

  function selectLang(lang) {
    var prevLang = currentLang;
    currentLang = lang;
    var sel = document.getElementById('langSelect');
    if (sel) sel.value = lang;
    document.documentElement.setAttribute('lang', lang);
    document.documentElement.setAttribute('dir', lang === 'ar' ? 'rtl' : 'ltr');
    fetch('/api/translations?lang=' + lang)
      .then(function(r) { return r.json(); })
      .then(function(t) { applyTranslations(t); });
    if (prevLang !== lang) { pushDataLayer({ event: 'language_change', from_lang: prevLang, to_lang: lang }); }
  }

  var currentTranslations = {};

  var disclaimerTexts = {
    form: {
      it: '\u26A0\uFE0F BonusPerMe è uno strumento orientativo e potrebbe contenere errori o informazioni non aggiornate. Non sostituisce la consulenza di un CAF, patronato o professionista. Verifica sempre le informazioni sui siti ufficiali prima di presentare domanda.',
      en: '\u26A0\uFE0F BonusPerMe is an informational tool and may contain errors or outdated information. It does not replace advice from a tax assistance center or professional. Always verify information on official websites before applying.',
      fr: '\u26A0\uFE0F BonusPerMe est un outil indicatif et peut contenir des erreurs ou des informations obsolètes. Il ne remplace pas les conseils d\'un centre d\'aide fiscale ou d\'un professionnel. Vérifiez toujours les informations sur les sites officiels avant de faire une demande.',
      es: '\u26A0\uFE0F BonusPerMe es una herramienta orientativa y puede contener errores o información desactualizada. No sustituye el asesoramiento de un centro de asistencia fiscal o profesional. Verifica siempre la información en los sitios oficiales antes de solicitar.',
      ro: '\u26A0\uFE0F BonusPerMe este un instrument orientativ și poate conține erori sau informații neactualizate. Nu înlocuiește consilierea unui centru de asistență fiscală sau a unui profesionist. Verificați întotdeauna informațiile pe site-urile oficiale înainte de a depune cererea.',
      ar: '\u26A0\uFE0F BonusPerMe أداة إرشادية وقد تحتوي على أخطاء أو معلومات غير محدّثة. لا تحلّ محلّ استشارة مركز المساعدة الضريبية أو المتخصصين. تحقق دائمًا من المعلومات على المواقع الرسمية قبل تقديم الطلب.',
      sq: '\u26A0\uFE0F BonusPerMe është një mjet orientues dhe mund të përmbajë gabime ose informacione të vjetruara. Nuk zëvendëson këshillimin e një qendre ndihme fiskale ose profesionisti. Verifikoni gjithmonë informacionet në faqet zyrtare përpara se të aplikoni.'
    },
    results: {
      it: '\u26A0\uFE0F Questi risultati sono orientativi. Importi, requisiti e scadenze potrebbero essere cambiati. Verifica sempre sui siti ufficiali (INPS, Agenzia delle Entrate, Regione) prima di fare domanda.',
      en: '\u26A0\uFE0F These results are indicative. Amounts, requirements, and deadlines may have changed. Always verify on official websites (INPS, Revenue Agency, Region) before applying.',
      fr: '\u26A0\uFE0F Ces résultats sont indicatifs. Les montants, conditions et délais peuvent avoir changé. Vérifiez toujours sur les sites officiels avant de faire une demande.',
      es: '\u26A0\uFE0F Estos resultados son orientativos. Los importes, requisitos y plazos pueden haber cambiado. Verifica siempre en los sitios oficiales antes de solicitar.',
      ro: '\u26A0\uFE0F Aceste rezultate sunt orientative. Sumele, cerințele și termenele s-ar fi putut schimba. Verificați întotdeauna pe site-urile oficiale înainte de a depune cererea.',
      ar: '\u26A0\uFE0F هذه النتائج إرشادية. قد تكون المبالغ والمتطلبات والمواعيد قد تغيرت. تحقق دائمًا من المواقع الرسمية قبل تقديم الطلب.',
      sq: '\u26A0\uFE0F Këto rezultate janë orientuese. Shumat, kërkesat dhe afatet mund të kenë ndryshuar. Verifikoni gjithmonë në faqet zyrtare përpara se të aplikoni.'
    }
  };

  function updateDisclaimers(lang) {
    var formBox = document.querySelector('[data-i18n-html="disclaimer_form"] .disclaimer-text');
    if (formBox && disclaimerTexts.form[lang]) {
      formBox.textContent = disclaimerTexts.form[lang];
    }
    var resBox = document.querySelector('[data-i18n-html="disclaimer_results"] .disclaimer-text');
    if (resBox && disclaimerTexts.results[lang]) {
      resBox.textContent = disclaimerTexts.results[lang];
    }
  }

  function applyTranslations(t) {
    currentTranslations = t;
    document.querySelectorAll('[data-i18n]').forEach(function(el) {
      var key = el.dataset.i18n;
      if (!t[key]) return;
      if (el.tagName === 'OPTION') {
        el.textContent = t[key];
      } else {
        // Preserve child SVG icons in buttons
        var svg = el.querySelector('svg, .icon');
        if (svg && el.children.length > 0) {
          // Only update text nodes
          Array.from(el.childNodes).forEach(function(n) {
            if (n.nodeType === 3 && n.textContent.trim()) n.textContent = ' ' + t[key] + ' ';
          });
          // If no text node found, try span
          var span = el.querySelector('span[data-i18n]');
          if (!span) el.textContent = t[key];
        } else {
          el.textContent = t[key];
        }
      }
    });
    // If results visible, re-render bonus cards
    if (lastResult && document.getElementById('resultsPage').style.display !== 'none') {
      renderBonusCards(lastResult.bonus, activeFilter);
    }
    // Update disclaimers
    updateDisclaimers(currentLang);
  }

  /* Quick estimate calculator */
  function updateEstimate() {
    var figli = parseInt(document.getElementById('est-figli').value);
    var fascia = document.getElementById('est-isee').value;
    var total = 0;
    if (figli > 0) {
      var rates = { 'sotto15k': 200, '15-25k': 150, '25-40k': 100, 'sopra40k': 57, 'noisee': 57 };
      total += figli * (rates[fascia] || 57) * 12;
    }
    if (figli > 0 && (fascia === 'sotto15k' || fascia === '15-25k')) {
      var nido = { 'sotto15k': 3600, '15-25k': 2500 };
      total += nido[fascia] || 0;
    }
    if (fascia === 'sotto15k') total += 500;
    var formatted = total > 0
            ? 'Fino a €' + total.toLocaleString('it-IT') + '/anno'
            : 'Inserisci i dati per la stima';
    document.getElementById('est-result').textContent = formatted;
  }
  document.getElementById('est-figli').addEventListener('change', updateEstimate);
  document.getElementById('est-isee').addEventListener('change', updateEstimate);
  updateEstimate();

  /* Load last scraping date */
  function updateLastScrapeDate() {
    fetch('/api/status')
      .then(function(r) { return r.json(); })
      .then(function(data) {
        if (data.last_update_display) {
          var el = document.getElementById('lastUpdate');
          if (el) el.textContent = 'Dati aggiornati al ' + data.last_update_display;
        }
      })
      .catch(function() {
        var now = new Date();
        var dd = String(now.getDate()).padStart(2, '0');
        var mm = String(now.getMonth() + 1).padStart(2, '0');
        var yyyy = now.getFullYear();
        var hh = String(now.getHours()).padStart(2, '0');
        var min = String(now.getMinutes()).padStart(2, '0');
        var el = document.getElementById('lastUpdate');
        if (el) el.textContent = 'Dati aggiornati al ' + dd + '/' + mm + '/' + yyyy + ' alle ' + hh + ':' + min;
      });
  }
  updateLastScrapeDate();

  /* ============================================
     TOAST NOTIFICATION SYSTEM
     ============================================ */
  (function(){if(!document.getElementById('toastContainer')){var c=document.createElement('div');c.id='toastContainer';c.className='toast-container';c.setAttribute('aria-live','polite');document.body.appendChild(c)}})();
  function escHtml(s){var d=document.createElement('div');d.textContent=s;return d.innerHTML}
  function showToast(type,title,message,duration){
    duration=duration||5000;
    var container=document.getElementById('toastContainer');if(!container)return;
    var icons={error:'&#x26A0;',success:'&#x2713;',warning:'&#x26A0;',info:'&#x2139;'};
    var toast=document.createElement('div');toast.className='toast toast--'+type;
    toast.innerHTML='<span class="toast-icon">'+(icons[type]||icons.info)+'</span><div class="toast-content"><div class="toast-title">'+escHtml(title)+'</div><div class="toast-msg">'+escHtml(message)+'</div></div><button class="toast-close" aria-label="Chiudi">&times;</button>';
    var timer,remaining=duration,start=Date.now();
    function startTimer(){start=Date.now();timer=setTimeout(function(){dismiss()},remaining)}
    function dismiss(){toast.classList.add('hiding');setTimeout(function(){if(toast.parentNode)toast.parentNode.removeChild(toast)},300)}
    toast.querySelector('.toast-close').onclick=dismiss;
    toast.onmouseenter=function(){clearTimeout(timer);remaining-=Date.now()-start};
    toast.onmouseleave=function(){startTimer()};
    var toasts=container.querySelectorAll('.toast');if(toasts.length>=3){toasts[0].classList.add('hiding');setTimeout(function(){if(toasts[0].parentNode)toasts[0].parentNode.removeChild(toasts[0])},300)}
    container.appendChild(toast);startTimer();
  }
  function markFieldError(fieldId,msg){
    var el=document.getElementById(fieldId);if(!el)return;
    el.classList.add('field-invalid');
    var existing=el.parentNode.querySelector('.field-error');if(existing)existing.remove();
    var span=document.createElement('span');span.className='field-error';span.textContent=msg;
    el.parentNode.appendChild(span);
  }
  function clearFieldError(fieldId){
    var el=document.getElementById(fieldId);if(!el)return;
    el.classList.remove('field-invalid');
    var existing=el.parentNode.querySelector('.field-error');if(existing)existing.remove();
  }
  function clearAllErrors(){document.querySelectorAll('.field-invalid').forEach(function(el){el.classList.remove('field-invalid')});document.querySelectorAll('.field-error').forEach(function(el){el.remove()})}
  window.addEventListener('offline',function(){showToast('warning','Offline','Connessione internet persa. Alcune funzionalità potrebbero non essere disponibili.')});
  window.addEventListener('online',function(){showToast('success','Online','Connessione ripristinata.')});

  /* ============================================
     PAGE NAVIGATION
     ============================================ */
  function startWizard() {
    pushDataLayer({ event: 'cta_click', cta_name: 'start_wizard' });
    document.getElementById('landingPage').style.display = 'none';
    document.getElementById('wizardPage').style.display = 'flex';
    document.getElementById('resultsPage').style.display = 'none';
    wizStep = 0; wizUpdateUI();
    window.scrollTo(0, 0);
    pushDataLayer({ event: 'wizard_start' });
  }
  function backToLanding() {
    document.getElementById('wizardPage').style.display = 'none';
    document.getElementById('resultsPage').style.display = 'none';
    document.getElementById('landingPage').style.display = 'block';
    window.scrollTo(0, 0);
  }
  function showResults() {
    document.getElementById('landingPage').style.display = 'none';
    document.getElementById('wizardPage').style.display = 'none';
    document.getElementById('resultsPage').style.display = 'block';
    window.scrollTo(0, 0);
  }

  /* ============================================
     WIZARD LOGIC
     ============================================ */
  var wizStep = 0;
  var wizTotal = 4;
  var lastResult = null;
  var lastProfile = null;

  function wizUpdateUI() {
    document.querySelectorAll('.wizard-panel').forEach(function(p,i) {
      p.classList.toggle('active', i === wizStep);
    });
    document.querySelectorAll('.wizard-step-dot').forEach(function(d,i) {
      d.classList.remove('active','done');
      if (i < wizStep) d.classList.add('done');
      if (i === wizStep) d.classList.add('active');
    });
    // Update progress bar ARIA
    var prog = document.getElementById('wizProgress');
    if (prog) {
      prog.setAttribute('aria-valuenow', wizStep + 1);
      prog.setAttribute('aria-label', 'Progresso: step ' + (wizStep + 1) + ' di 4');
    }
    // Focus management: move focus to step title
    var activePanel = document.querySelector('.wizard-panel.active');
    if (activePanel) {
      var title = activePanel.querySelector('.wizard-step-title');
      if (title) { title.setAttribute('tabindex', '-1'); title.focus(); }
    }
  }

  function validateWizardStep(stepNum) {
    clearAllErrors();
    var valid = true;
    if (stepNum === 0) {
      var eta = parseInt(document.getElementById('wiz-eta').value);
      if (isNaN(eta) || eta < 18 || eta > 120) { markFieldError('wiz-eta', 'Inserisci un\'età valida (18-120)'); valid = false; }
      if (!document.getElementById('wiz-stato-civile').value) { markFieldError('wiz-stato-civile', 'Seleziona lo stato civile'); valid = false; }
      if (!document.getElementById('wiz-occupazione').value) { markFieldError('wiz-occupazione', 'Seleziona l\'occupazione'); valid = false; }
    } else if (stepNum === 1) {
      var figli = parseInt(document.getElementById('wiz-figli').value);
      var figliMin = parseInt(document.getElementById('wiz-figli-min').value) || 0;
      var figliU3 = parseInt(document.getElementById('wiz-figli-u3').value) || 0;
      var figliU1 = parseInt(document.getElementById('wiz-figli-u1').value) || 0;
      var figliMagg = parseInt(document.getElementById('wiz-figli-18-21').value) || 0;
      var figliDisab = parseInt(document.getElementById('wiz-figli-disabili').value) || 0;
      if (isNaN(figli) || figli < 0) { markFieldError('wiz-figli', 'Valore non valido'); valid = false; }
      if (figliMin + figliMagg > figli) { markFieldError('wiz-figli-min', 'Minorenni + maggiorenni non possono superare il totale figli'); valid = false; }
      if (figliU3 > figliMin) { markFieldError('wiz-figli-u3', 'Non può superare i figli minorenni'); valid = false; }
      if (figliU1 > figliU3) { markFieldError('wiz-figli-u1', 'Non può superare i figli under 3'); valid = false; }
      if (figliDisab > figli) { markFieldError('wiz-figli-disabili', 'Non può superare il numero di figli'); valid = false; }
    } else if (stepNum === 2) {
      if (!document.getElementById('wiz-residenza').value) { markFieldError('wiz-residenza', 'Seleziona la regione'); valid = false; }
    }
    if (!valid) { showToast('error', 'Dati incompleti', 'Correggi i campi evidenziati.'); }
    return valid;
  }
  // Auto-clear errors on input
  ['wiz-eta','wiz-stato-civile','wiz-occupazione','wiz-figli','wiz-figli-min','wiz-figli-u3','wiz-figli-u1','wiz-figli-18-21','wiz-figli-disabili','wiz-disabilita-figli','wiz-residenza','wiz-isee','wiz-reddito'].forEach(function(id){
    var el=document.getElementById(id);if(el){el.addEventListener('input',function(){clearFieldError(id)});el.addEventListener('change',function(){clearFieldError(id)})}
  });

  // Toggle disability grade field visibility based on figli_disabili count
  (function() {
    var fd = document.getElementById('wiz-figli-disabili');
    var wrap = document.getElementById('wiz-disabilita-figli-wrap');
    if (fd && wrap) {
      function toggleDisab() { wrap.style.display = (parseInt(fd.value) || 0) > 0 ? '' : 'none'; }
      fd.addEventListener('input', toggleDisab);
      fd.addEventListener('change', toggleDisab);
    }
  })();

  function wizNext() {
    if (!validateWizardStep(wizStep)) return;
    if (wizStep < wizTotal - 1) { wizStep++; wizUpdateUI(); pushDataLayer({ event: 'wizard_step', step: wizStep, step_name: ['dati_personali','famiglia','residenza','situazione_economica'][wizStep] }); }
  }
  function wizPrev() {
    if (wizStep > 0) { wizStep--; wizUpdateUI(); }
  }

  function getProfile() {
    return {
      eta: parseInt(document.getElementById('wiz-eta').value) || 35,
      residenza: document.getElementById('wiz-residenza').value,
      comune: '',
      stato_civile: document.getElementById('wiz-stato-civile').value,
      occupazione: document.getElementById('wiz-occupazione').value,
      numero_figli: parseInt(document.getElementById('wiz-figli').value) || 0,
      figli_minorenni: parseInt(document.getElementById('wiz-figli-min').value) || 0,
      figli_under3: parseInt(document.getElementById('wiz-figli-u3').value) || 0,
      figli_under1: parseInt(document.getElementById('wiz-figli-u1').value) || 0,
      figli_maggiorenni: parseInt(document.getElementById('wiz-figli-18-21').value) || 0,
      disabilita: document.getElementById('wiz-disabilita').checked,
      over65: parseInt(document.getElementById('wiz-over65').value) || 0,
      isee: parseFloat(document.getElementById('wiz-isee').value) || 0,
      reddito_annuo: parseFloat(document.getElementById('wiz-reddito').value) || 0,
      affittuario: document.getElementById('wiz-affittuario').checked,
      prima_abitazione: document.getElementById('wiz-prima-abitazione').checked,
      ristrutturaz_casa: document.getElementById('wiz-ristrutturazione').checked,
      studente: document.getElementById('wiz-studente').checked,
      nuovo_nato_2026: document.getElementById('wiz-nuovo-nato').checked,
      entrambi_genitori_lavoratori: document.getElementById('wiz-dual-income').checked,
      figli_disabili: parseInt(document.getElementById('wiz-figli-disabili').value) || 0,
      disabilita_figli: document.getElementById('wiz-disabilita-figli').value,
      madre_under21: document.getElementById('wiz-madre-u21').checked
    };
  }

  function wizSubmit() {
    if (!validateWizardStep(wizStep)) return;

    // If Turnstile is configured, ensure the token was obtained in step 1
    var tsEl = document.getElementById('turnstile-wiz');
    if (tsEl && !turnstileToken) {
      showToast('error', 'Verifica di sicurezza', 'Completa la verifica di sicurezza nel primo passaggio.');
      return;
    }
    doWizMatch();
  }

  function doWizMatch() {
    var btn = document.getElementById('wizSubmitBtn');
    btn.disabled = true;
    btn.textContent = 'Analisi in corso...';

    lastProfile = getProfile();

    var matchHeaders = { 'Content-Type': 'application/json' };
    if (turnstileToken) matchHeaders['X-Turnstile-Token'] = turnstileToken;

    fetch('/api/match', {
      method: 'POST',
      headers: matchHeaders,
      body: JSON.stringify(lastProfile)
    })
    .then(function(r) {
      if (r.status === 429) throw { type: 'rate_limit', message: 'Troppe richieste. Attendi qualche secondo.' };
      if (r.status === 403) throw { type: 'turnstile', message: 'Verifica di sicurezza non superata. Ricarica la pagina.' };
      if (!r.ok) throw { type: 'server', message: 'Errore del server (' + r.status + '). Riprova.' };
      return r.json();
    })
    .then(function(data) {
      lastResult = data;
      renderResults(data);
      showResults();
      showToast('success', 'Analisi completata', 'Trovati ' + data.bonus_trovati + ' bonus per te.');
      // Show avvisi toasts
      if (data.avvisi && data.avvisi.length > 0) {
        data.avvisi.slice(0, 3).forEach(function(a) {
          var t = a.tipo === 'danger' ? 'error' : a.tipo;
          showToast(t, 'Avviso bonus', a.messaggio);
        });
      }
      pushDataLayer({ event: 'bonus_search', regione: lastProfile.residenza, bonus_count: data.bonus_trovati, has_isee: lastProfile.isee > 0, risparmio: data.risparmio_stimato });
    })
    .catch(function(err) {
      var type = (err && err.type) || 'error';
      var msg = (err && err.message) || 'Errore sconosciuto. Riprova.';
      if (type === 'rate_limit') showToast('warning', 'Troppe richieste', msg);
      else if (type === 'turnstile') showToast('error', 'Verifica fallita', msg);
      else if (!navigator.onLine) showToast('warning', 'Offline', 'Connessione internet assente.');
      else showToast('error', 'Errore', msg);
    })
    .finally(function() {
      btn.disabled = false;
      btn.innerHTML = '<span class="icon icon-sm"><svg><use href="#ico-zap"/></svg></span> Verifica bonus';
    });
  }

  /* ============================================
     RESULTS RENDERING
     ============================================ */
  var tabIcons = {
    'tutti': 'ico-list', 'famiglia': 'ico-users', 'casa': 'ico-home',
    'salute': 'ico-shield', 'istruzione': 'ico-edit', 'spesa': 'ico-wallet',
    'lavoro': 'ico-zap', 'sostegno': 'ico-users', 'trasporti': 'ico-home', 'altro': 'ico-zap'
  };
  var tabLabels = {
    'tutti': 'Tutti', 'famiglia': 'Famiglia', 'casa': 'Casa', 'salute': 'Salute',
    'istruzione': 'Istruzione', 'spesa': 'Spesa', 'lavoro': 'Lavoro',
    'sostegno': 'Sostegno', 'trasporti': 'Trasporti', 'altro': 'Altro'
  };
  var activeFilter = 'tutti';

  function renderResults(data) {
    var attivi = data.bonus_attivi || data.bonus.filter(function(b){return !b.scaduto;}).length;
    var scaduti = data.bonus_scaduti || data.bonus.filter(function(b){return b.scaduto;}).length;

    document.getElementById('results-saving').textContent = data.risparmio_stimato || 'EUR 0';
    var countEl = document.getElementById('results-count');
    countEl.textContent = attivi + ' bonus disponibil' + (attivi === 1 ? 'e' : 'i');

    // Expired count
    var oldExpPill = document.getElementById('results-expired-pill');
    if (oldExpPill) oldExpPill.remove();
    if (scaduti > 0) {
      var expPill = document.createElement('div');
      expPill.id = 'results-expired-pill';
      expPill.className = 'bonus-count-expired';
      expPill.textContent = '+ ' + scaduti + ' scadut' + (scaduti === 1 ? 'o' : 'i');
      document.getElementById('resultsHero').appendChild(expPill);
    }

    // Set print date
    var printDateEl = document.getElementById('printDate');
    if (printDateEl) {
      printDateEl.textContent = new Date().toLocaleDateString('it-IT', { day: '2-digit', month: '2-digit', year: 'numeric' });
    }

    // Build tab bar
    var counts = { tutti: data.bonus.length };
    data.bonus.forEach(function(b) {
      if (!b.scaduto) {
        var c = b.categoria || 'altro';
        counts[c] = (counts[c] || 0) + 1;
      }
    });
    var categories = ['tutti'];
    data.bonus.forEach(function(b) {
      if (!b.scaduto) {
        var c = b.categoria || 'altro';
        if (categories.indexOf(c) === -1) categories.push(c);
      }
    });

    activeFilter = 'tutti';
    var tabs = document.getElementById('resultsTabs');
    tabs.innerHTML = '';
    categories.forEach(function(cat) {
      var icon = tabIcons[cat] || 'ico-zap';
      var label = tabLabels[cat] || cat.charAt(0).toUpperCase() + cat.slice(1);
      var count = counts[cat] || 0;
      tabs.innerHTML += '<button class="tab-btn' + (cat === 'tutti' ? ' active' : '') + '" data-cat="' + cat + '" onclick="filterBonus(\'' + cat + '\')">' +
        '<svg class="tab-icon"><use href="#' + icon + '"/></svg>' +
        '<span>' + label + '</span>' +
        '<span class="tab-count">' + count + '</span></button>';
    });
    // Expired tab
    if (scaduti > 0) {
      tabs.innerHTML += '<button class="tab-btn" data-cat="scaduti" onclick="filterBonus(\'scaduti\')"><svg class="tab-icon"><use href="#ico-clock"/></svg><span>Scaduti</span><span class="tab-count tab-count--expired">' + scaduti + '</span></button>';
    }

    renderBonusCards(data.bonus, 'tutti');
  }

  function filterBonus(cat) {
    activeFilter = cat;
    document.querySelectorAll('.tab-btn').forEach(function(b) {
      b.classList.toggle('active', b.dataset.cat === cat);
    });
    var filtered;
    if (cat === 'tutti') {
      filtered = lastResult.bonus;
    } else if (cat === 'scaduti') {
      filtered = lastResult.bonus.filter(function(b) { return b.scaduto; });
    } else {
      filtered = lastResult.bonus.filter(function(b) { return !b.scaduto && (b.categoria || 'altro') === cat; });
    }
    renderBonusCards(filtered, cat);
  }

  function renderBonusCards(bonuses, activeCat) {
    var grid = document.getElementById('bonusGrid');
    grid.innerHTML = '';
    var shownExpiredSep = false;

    bonuses.forEach(function(b, idx) {
      var cardId = 'bonus-card-' + idx;

      // Expired separator
      if (b.scaduto && !shownExpiredSep && activeCat !== 'scaduti') {
        shownExpiredSep = true;
        grid.innerHTML += '<div class="expired-separator"><div class="expired-separator-line"></div><span class="expired-separator-text"><svg class="tab-icon" style="width:14px;height:14px"><use href="#ico-clock"/></svg> Bonus scaduti</span><div class="expired-separator-line"></div></div>';
      }

      var compatClass = b.compatibilita >= 80 ? 'high' : (b.compatibilita >= 50 ? 'med' : 'low');
      var html = '<div class="bonus-card' + (b.scaduto ? ' bonus-card--expired' : '') + '" id="' + cardId + '" data-bonus-id="' + esc(b.id || '') + '">';

      // Card header
      html += '<div class="bonus-card-header">';

      // Title row: dot + name + badges + compat badge
      html += '<div class="bonus-title-row">';
      html += '<span class="compat-dot ' + compatClass + '"></span>';
      html += '<span class="bonus-name">' + esc(b.nome);
      if (b.regioni && b.regioni.length > 0) {
        html += ' <span class="badge-regionale">' + esc(b.regioni[0]) + '</span>';
      }
      if (b.scaduto) {
        html += ' <span class="badge-scaduto">SCADUTO</span>';
      }
      html += '</span>';
      html += '<span class="compat-badge ' + compatClass + '">' + b.compatibilita + '%</span>';
      html += '</div>';

      // Meta row: ente + scadenza
      html += '<div class="bonus-meta-row">';
      html += '<span class="bonus-ente">' + esc(b.ente || '') + '</span>';
      if (b.scadenza) {
        html += '<span class="bonus-meta-sep"></span>';
        html += '<span class="bonus-scadenza' + (b.scaduto ? '' : ' active') + '">' + esc(b.scadenza) + '</span>';
      }
      html += '</div>';

      // Validity banner
      if (!b.scaduto && b.stato_validita) {
        if (b.stato_validita === 'in_scadenza') {
          html += '<div class="bonus-alert bonus-alert--warning">&#x26A0; Scade a breve — Fai domanda subito</div>';
        } else if (b.stato_validita === 'da_verificare') {
          html += '<div class="bonus-alert bonus-alert--info">&#x2139; Verifica disponibilità sul sito ufficiale</div>';
        } else if (b.stato_validita === 'potenzialmente_scaduto') {
          html += '<div class="bonus-alert bonus-alert--danger">&#x26A0; Questo bonus potrebbe non essere più disponibile</div>';
        }
      }

      // Importo box — anti-duplication logic
      var lStimato = (currentTranslations && currentTranslations['results.importo_reale']) || 'Stimato per te';
      var hasStimato = b.importo_reale && b.importo_reale !== b.importo;
      html += '<div class="bonus-importo-box">';
      if (hasStimato) {
        html += '<span class="importo-main">' + esc(b.importo_reale) + '</span>';
        html += '<span class="importo-label">' + esc(lStimato) + '</span>';
        html += '<div class="importo-range">Range: ' + esc(b.importo) + '</div>';
      } else {
        html += '<span class="importo-main">' + esc(b.importo || '') + '</span>';
      }
      html += '</div>';

      // Description
      html += '<p class="bonus-desc">' + esc(b.descrizione || '') + '</p>';

      html += '</div>'; // bonus-card-header

      // Accordion toggle
      var lExpand = (currentTranslations && currentTranslations['results.expand']) || 'Vedi dettagli';
      html += '<button class="bonus-toggle" onclick="toggleDetails(\'' + cardId + '\')" aria-expanded="false" aria-controls="' + cardId + '-details"><span>' + esc(lExpand) + '</span><svg class="chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><polyline points="6 9 12 15 18 9"/></svg></button>';

      // Details
      html += '<div class="bonus-details" id="' + cardId + '-details">';

      // Requisiti
      var lRequisiti = (currentTranslations && currentTranslations['results.requisiti']) || 'Requisiti';
      var lComeFare = (currentTranslations && currentTranslations['results.come_fare']) || 'Come fare domanda';
      var lDocumenti = (currentTranslations && currentTranslations['results.documenti']) || 'Documenti necessari';
      var lFaq = (currentTranslations && currentTranslations['results.faq']) || 'Domande frequenti';

      if (b.requisiti && b.requisiti.length > 0) {
        html += '<div class="detail-section"><div class="detail-section-title">' + esc(lRequisiti) + '</div><ul class="req-list">';
        b.requisiti.forEach(function(r) { html += '<li class="req-item">' + esc(r) + '</li>'; });
        html += '</ul></div>';
      }

      // Come fare domanda
      if (b.come_richiederlo && b.come_richiederlo.length > 0) {
        html += '<div class="detail-section"><div class="detail-section-title">' + esc(lComeFare) + '</div><ul class="steps-list">';
        b.come_richiederlo.forEach(function(s, si) {
          html += '<li class="step-item"><span class="step-num">' + (si+1) + '</span><span>' + esc(s) + '</span></li>';
        });
        html += '</ul></div>';
      }

      // Documenti
      if (b.documenti && b.documenti.length > 0) {
        html += '<div class="detail-section"><div class="detail-section-title">' + esc(lDocumenti) + '</div><ul class="doc-list">';
        b.documenti.forEach(function(d, di) {
          html += '<li class="doc-item" data-doc-idx="' + di + '" onclick="toggleDoc(this)"><span class="doc-checkbox"></span><span class="doc-label">' + esc(d) + '</span></li>';
        });
        html += '</ul></div>';
      }

      // FAQ
      if (b.faq && b.faq.length > 0) {
        html += '<div class="detail-section"><div class="detail-section-title">' + esc(lFaq) + '</div><ul class="faq-list">';
        b.faq.forEach(function(f) {
          html += '<li class="faq-item"><button class="faq-question" onclick="toggleFaq(this)" aria-expanded="false"><span>' + esc(f.domanda) + '</span><svg class="faq-chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><polyline points="6 9 12 15 18 9"/></svg></button><div class="faq-answer" role="region">' + esc(f.risposta) + '</div></li>';
        });
        html += '</ul></div>';
      }

      // Verifica manuale
      if (b.verifica_manuale_necessaria) {
        html += '<div class="bonus-verifica"><span class="icon icon-sm"><svg><use href="#ico-alert"/></svg></span> Dato inserito manualmente. <a href="' + safeURL(b.link_ricerca || b.link_ufficiale) + '" target="_blank" rel="noopener">Verifica sul sito della regione</a></div>';
      }

      html += '</div>'; // bonus-details

      // Card footer: verification + CTA button (compact, one line)
      var lVaiSito = (currentTranslations && currentTranslations['results.link_ufficiale']) || 'Vai al sito';
      html += '<div class="bonus-card-footer">';
      if (b.link_verificato && b.link_ufficiale) {
        var footerDate = formatDateIT(b.link_verificato_al || b.ultimo_aggiornamento);
        var footerEnte = b.fonte_nome || b.ente || '';
        html += '<div class="link-verified"><span class="icon"><svg><use href="#ico-check-circle"/></svg></span><span>Verificato</span>';
        if (footerDate) html += '<span class="date">' + footerDate + '</span>';
        if (footerEnte) html += '<span class="date">&middot; ' + esc(footerEnte) + '</span>';
        html += '</div>';
        html += '<a href="' + safeURL(b.link_ufficiale) + '" target="_blank" rel="noopener" class="btn-sito-ufficiale">' + esc(lVaiSito) + ' <span class="icon"><svg><use href="#ico-external"/></svg></span></a>';
      } else if (b.link_ricerca) {
        html += '<div class="link-warn-footer"><span class="icon"><svg><use href="#ico-alert"/></svg></span><span>Link non verificato</span></div>';
        html += '<a href="' + safeURL(b.link_ricerca) + '" target="_blank" rel="noopener" class="btn-sito-ufficiale">Cerca su sito <span class="icon"><svg><use href="#ico-external"/></svg></span></a>';
      } else if (b.link_ufficiale) {
        html += '<div></div>';
        html += '<a href="' + safeURL(b.link_ufficiale) + '" target="_blank" rel="noopener" class="btn-sito-ufficiale">' + esc(lVaiSito) + ' <span class="icon"><svg><use href="#ico-external"/></svg></span></a>';
      }
      html += '</div>';

      // Expired note
      if (b.scaduto) {
        html += '<div class="expired-note"><span class="icon icon-sm"><svg><use href="#ico-clock"/></svg></span> Questo bonus non è più disponibile</div>';
      }

      html += '</div>'; // bonus-card

      grid.innerHTML += html;
    });

    // Restore document check states from sessionStorage
    document.querySelectorAll('.doc-item').forEach(function(el) {
      var card = el.closest('.bonus-card');
      if (!card) return;
      var bonusId = card.dataset.bonusId;
      var docIdx = el.dataset.docIdx;
      var key = 'bpm_doc_' + bonusId + '_' + docIdx;
      if (sessionStorage.getItem(key)) el.classList.add('checked');
    });
  }

  function esc(s) {
    if (!s) return '';
    var d = document.createElement('div');
    d.appendChild(document.createTextNode(s));
    return d.innerHTML;
  }

  function safeURL(url) {
    if (!url) return '#';
    var s = String(url).trim();
    if (s.indexOf('https://') === 0 || s.indexOf('http://') === 0 || s.indexOf('/') === 0) {
      return esc(s);
    }
    return '#';
  }

  function formatDateIT(dateStr) {
    if (!dateStr) return '';
    var d = new Date(dateStr);
    if (isNaN(d.getTime())) {
      // Try DD/MM/YYYY passthrough
      if (/^\d{2}\/\d{2}\/\d{4}$/.test(dateStr)) return dateStr;
      return '';
    }
    var dd = String(d.getDate()).padStart(2, '0');
    var mm = String(d.getMonth() + 1).padStart(2, '0');
    var yyyy = d.getFullYear();
    return dd + '/' + mm + '/' + yyyy;
  }

  function toggleDetails(cardId) {
    var det = document.getElementById(cardId + '-details');
    var btn = det.previousElementSibling;
    var isOpen = det.classList.toggle('show');
    btn.classList.toggle('open', isOpen);
    btn.setAttribute('aria-expanded', isOpen ? 'true' : 'false');
    if (isOpen) pushDataLayer({ event: 'bonus_detail_view', bonus_id: cardId });
    var lExpand = (currentTranslations && currentTranslations['results.expand']) || 'Vedi dettagli';
    var lCollapse = (currentTranslations && currentTranslations['results.collapse']) || 'Nascondi dettagli';
    btn.querySelector('span').textContent = isOpen ? lCollapse : lExpand;
  }

  function toggleFaq(btn) {
    var answer = btn.nextElementSibling;
    var isOpen = btn.classList.contains('open');
    // Close all in same section
    var section = btn.closest('.detail-section');
    if (section) {
      section.querySelectorAll('.faq-question.open').forEach(function(q) {
        q.classList.remove('open');
        q.setAttribute('aria-expanded', 'false');
        q.nextElementSibling.classList.remove('show');
      });
    }
    if (!isOpen) {
      btn.classList.add('open');
      btn.setAttribute('aria-expanded', 'true');
      answer.classList.add('show');
    }
  }

  function toggleDoc(el) {
    el.classList.toggle('checked');
    var card = el.closest('.bonus-card');
    if (!card) return;
    var bonusId = card.dataset.bonusId;
    var docIdx = el.dataset.docIdx;
    var key = 'bpm_doc_' + bonusId + '_' + docIdx;
    if (el.classList.contains('checked')) {
      sessionStorage.setItem(key, '1');
    } else {
      sessionStorage.removeItem(key);
    }
  }

  /* ============================================
     ACTIONS
     ============================================ */
  function downloadReport(mode) {
    if (!lastProfile) return;
    pushDataLayer({ event: mode === 'print' ? 'pdf_print' : 'pdf_download' });
    var url = '/api/report' + (mode === 'print' ? '?mode=inline' : '');
    var form = document.createElement('form');
    form.method = 'POST';
    form.action = url;
    form.target = mode === 'print' ? '_blank' : '';
    var input = document.createElement('input');
    input.type = 'hidden';
    input.name = 'data';
    input.value = JSON.stringify(lastProfile);
    form.appendChild(input);
    document.body.appendChild(form);
    form.submit();
    document.body.removeChild(form);
  }

  function exportCalendar() {
    if (!lastResult || !lastResult.bonus) return;
    pushDataLayer({ event: 'calendar_export' });
    var items = lastResult.bonus.filter(function(b) { return b.scadenza; }).map(function(b) {
      return { nome: b.nome, scadenza: b.scadenza };
    });
    if (items.length === 0) { showToast('info', 'Nessuna scadenza', 'Nessuna scadenza da esportare per i bonus trovati.'); return; }
    var url = '/api/calendar?bonuses=' + encodeURIComponent(JSON.stringify(items));
    window.location.href = url;
  }

  function backToWizard() {
    document.getElementById('resultsPage').style.display = 'none';
    document.getElementById('wizardPage').style.display = 'flex';
    window.scrollTo(0, 0);
  }

  function shareWhatsApp() {
    if (!lastResult) return;
    pushDataLayer({ event: 'share_profile', method: 'whatsapp', bonus_count: lastResult.bonus_trovati });
    var waText = 'Ho scoperto che ho diritto a ' + lastResult.bonus_trovati + ' bonus per un risparmio di ' + (lastResult.risparmio_stimato || 'EUR 0') + '. Verifica anche tu su BonusPerMe.it!';
    window.open('https://wa.me/?text=' + encodeURIComponent(waText), '_blank');
  }

  /* ============================================
     ISEE PDF UPLOAD
     ============================================ */
  var uploadZone = document.getElementById('iseeUploadZone');
  var iseeFileInput = document.getElementById('iseeFile');

  uploadZone.addEventListener('click', function() { iseeFileInput.click(); });
  uploadZone.addEventListener('dragover', function(e) { e.preventDefault(); uploadZone.style.borderColor = 'var(--blue-mid)'; });
  uploadZone.addEventListener('dragleave', function() { uploadZone.style.borderColor = ''; });
  uploadZone.addEventListener('drop', function(e) {
    e.preventDefault();
    uploadZone.style.borderColor = '';
    if (e.dataTransfer.files.length > 0) handleISEEFile(e.dataTransfer.files[0]);
  });
  iseeFileInput.addEventListener('change', function() {
    if (iseeFileInput.files.length > 0) handleISEEFile(iseeFileInput.files[0]);
  });

  /* ============================================
     COOKIE CONSENT
     ============================================ */
  (function() {
    var consent = localStorage.getItem('cookie_consent');
    if (!consent) {
      document.getElementById('cookieBanner').style.display = 'block';
    }
  })();
  function acceptCookies() {
    localStorage.setItem('cookie_consent', 'accepted');
    document.getElementById('cookieBanner').style.display = 'none';
    loadGTM();
    pushDataLayer({ event: 'cookie_consent', consent: 'accepted' });
  }
  function rejectCookies() {
    localStorage.setItem('cookie_consent', 'rejected');
    document.getElementById('cookieBanner').style.display = 'none';
    pushDataLayer({ event: 'cookie_consent', consent: 'rejected' });
  }

  /* ============================================
     DYNAMIC COUNTER
     ============================================ */
  fetch('/api/stats')
    .then(function(r) { return r.json(); })
    .then(function(data) {
      if (data.scansioni) {
        var formatted = Number(data.scansioni).toLocaleString('it-IT');
        var el1 = document.getElementById('proofCounter');
        if (el1) el1.textContent = formatted;
        var el2 = document.getElementById('proofCounterHero');
        if (el2) el2.textContent = formatted;
      }
    })
    .catch(function() {});

  /* ============================================
     TURNSTILE
     ============================================ */
  var turnstileToken = '';
  function onTurnstileSuccess(token) { turnstileToken = token; }

  /* ============================================
     SOCIAL PROOF — AGGREGATE STATS ONLY
     ============================================ */
  var socialProofMessages = [
    {
      it: 'Oggi <strong>{visitors}</strong> persone hanno usato BonusPerMe',
      en: 'Today <strong>{visitors}</strong> people used BonusPerMe',
      fr: 'Aujourd\'hui <strong>{visitors}</strong> personnes ont utilisé BonusPerMe',
      es: 'Hoy <strong>{visitors}</strong> personas han usado BonusPerMe',
      ro: 'Astăzi <strong>{visitors}</strong> persoane au folosit BonusPerMe',
      ar: 'اليوم استخدم <strong>{visitors}</strong> شخص BonusPerMe',
      sq: 'Sot <strong>{visitors}</strong> persona përdorën BonusPerMe'
    },
    {
      it: 'Oggi sono stati trovati <strong>€{amount}</strong> di bonus',
      en: 'Today <strong>€{amount}</strong> in bonuses were found',
      fr: 'Aujourd\'hui <strong>{amount} €</strong> de bonus ont été trouvés',
      es: 'Hoy se han encontrado <strong>€{amount}</strong> en bonos',
      ro: 'Astăzi au fost găsite bonusuri de <strong>€{amount}</strong>',
      ar: 'اليوم تم العثور على مكافآت بقيمة <strong>€{amount}</strong>',
      sq: 'Sot u gjetën <strong>€{amount}</strong> bonuse'
    },
    {
      it: '<strong>{visitors}</strong> verifiche effettuate oggi',
      en: '<strong>{visitors}</strong> checks completed today',
      fr: '<strong>{visitors}</strong> vérifications effectuées aujourd\'hui',
      es: '<strong>{visitors}</strong> verificaciones realizadas hoy',
      ro: '<strong>{visitors}</strong> verificări efectuate astăzi',
      ar: 'تم إجراء <strong>{visitors}</strong> عملية تحقق اليوم',
      sq: '<strong>{visitors}</strong> verifikime të kryera sot'
    },
    {
      it: 'Oltre <strong>{total}</strong> famiglie hanno usato BonusPerMe',
      en: 'Over <strong>{total}</strong> families have used BonusPerMe',
      fr: 'Plus de <strong>{total}</strong> familles ont utilisé BonusPerMe',
      es: 'Más de <strong>{total}</strong> familias han usado BonusPerMe',
      ro: 'Peste <strong>{total}</strong> familii au folosit BonusPerMe',
      ar: 'أكثر من <strong>{total}</strong> عائلة استخدمت BonusPerMe',
      sq: 'Mbi <strong>{total}</strong> familje kanë përdorur BonusPerMe'
    },
    {
      it: 'In media ogni famiglia scopre <strong>{avg}</strong> bonus',
      en: 'On average each family discovers <strong>{avg}</strong> bonuses',
      fr: 'En moyenne chaque famille découvre <strong>{avg}</strong> bonus',
      es: 'En promedio cada familia descubre <strong>{avg}</strong> bonos',
      ro: 'În medie fiecare familie descoperă <strong>{avg}</strong> bonusuri',
      ar: 'في المتوسط تكتشف كل عائلة <strong>{avg}</strong> مكافآت',
      sq: 'Mesatarisht çdo familje zbulon <strong>{avg}</strong> bonuse'
    }
  ];

  var socialProofTimer;
  var socialProofCount = 0;

  function initSocialProof() {
    if (sessionStorage.getItem('bpm_sp_closed')) return;
    var delay = 15000 + Math.random() * 10000;
    socialProofTimer = setTimeout(showSocialProof, delay);
  }

  function showSocialProof() {
    var el = document.getElementById('socialProof');
    var textEl = document.getElementById('socialProofText');
    if (!el || !textEl) return;

    // Non mostrare se il wizard è aperto
    var wizPage = document.getElementById('wizardPage');
    if (wizPage && wizPage.style.display !== 'none') {
      socialProofTimer = setTimeout(showSocialProof, 30000);
      return;
    }

    // Non mostrare se il cookie banner è visibile
    var cookieBanner = document.getElementById('cookieBanner');
    if (cookieBanner && cookieBanner.style.display !== 'none') {
      socialProofTimer = setTimeout(showSocialProof, 10000);
      return;
    }

    // Scegli messaggio in sequenza
    var lang = sessionStorage.getItem('bonusperme_lang') || 'it';
    var msgs = socialProofMessages;
    var msg = msgs[socialProofCount % msgs.length];
    var text = msg[lang] || msg['it'];

    // Genera numeri plausibili
    var visitors = 10 + Math.floor(Math.random() * 240);
    var amount = Math.floor(visitors * (6000 + Math.random() * 4000));
    var total = 1200 + Math.floor(Math.random() * 800);
    var avg = 4 + Math.floor(Math.random() * 5);

    // Formatta con punto separatore migliaia (italiano)
    var amountStr = amount.toString().replace(/\B(?=(\d{3})+(?!\d))/g, '.');
    var totalStr = total.toString().replace(/\B(?=(\d{3})+(?!\d))/g, '.');

    text = text.replace('{visitors}', visitors);
    text = text.replace('{amount}', amountStr);
    text = text.replace('{total}', totalStr);
    text = text.replace('{avg}', avg);

    textEl.innerHTML = text;
    el.classList.add('show');
    socialProofCount++;

    setTimeout(function() {
      el.classList.remove('show');
      var next = 45000 + Math.random() * 45000;
      socialProofTimer = setTimeout(showSocialProof, next);
    }, 6000);
  }

  function closeSocialProof() {
    var el = document.getElementById('socialProof');
    if (el) el.classList.remove('show');
    clearTimeout(socialProofTimer);
    sessionStorage.setItem('bpm_sp_closed', '1');
  }

  document.addEventListener('DOMContentLoaded', initSocialProof);

  /* Keyboard navigation */
  document.addEventListener('keydown', function(e) {
    // Escape closes accordion details
    if (e.key === 'Escape') {
      var openDetails = document.querySelectorAll('.bonus-details.show');
      openDetails.forEach(function(det) {
        det.classList.remove('show');
        var btn = det.previousElementSibling;
        if (btn) { btn.classList.remove('open'); btn.setAttribute('aria-expanded', 'false'); }
      });
      var openFaq = document.querySelectorAll('.faq-question.open');
      openFaq.forEach(function(q) {
        q.classList.remove('open');
        q.setAttribute('aria-expanded', 'false');
        q.nextElementSibling.classList.remove('show');
      });
    }
  });

  function handleISEEFile(file) {
    var status = document.getElementById('iseeUploadStatus');
    status.style.display = 'block';
    status.style.color = 'var(--blue-mid)';
    status.textContent = 'Analisi PDF in corso...';

    var fd = new FormData();
    fd.append('file', file);

    fetch('/api/parse-isee', { method: 'POST', body: fd })
    .then(function(r) { return r.json(); })
    .then(function(data) {
      if (data.found && data.isee > 0) {
        document.getElementById('wiz-isee').value = data.isee;
        status.style.color = 'var(--green)';
        status.textContent = 'ISEE trovato: EUR ' + data.isee.toLocaleString('it-IT');
      } else {
        status.style.color = 'var(--amber)';
        status.textContent = 'ISEE non trovato nel PDF. Inseriscilo manualmente.';
      }
    })
    .catch(function() {
      status.style.color = 'var(--terra)';
      status.textContent = 'Errore lettura PDF.';
    });
  }
</script>

<!-- Social proof toast -->
<style>
.social-proof{position:fixed;bottom:-100px;left:20px;z-index:900;max-width:380px;background:#fff;border:1px solid var(--ink-15,rgba(0,0,0,0.08));border-radius:10px;box-shadow:0 4px 20px rgba(0,0,0,0.12);padding:12px 16px;display:flex;align-items:center;gap:10px;transition:bottom 0.4s cubic-bezier(0.34,1.56,0.64,1);font-family:'DM Sans',sans-serif}
.social-proof.show{bottom:24px}
.social-proof-icon{font-size:1.3rem;flex-shrink:0}
.social-proof-text{font-size:.82rem;color:var(--ink-75,#444);line-height:1.4}
.social-proof-text strong{color:var(--green,#2A6B45);font-weight:700}
.social-proof-close{position:absolute;top:6px;right:8px;background:none;border:none;font-size:1rem;color:var(--ink-30,#999);cursor:pointer;padding:2px 4px;line-height:1}
.social-proof-close:hover{color:var(--ink-75,#444)}
@media(max-width:480px){.social-proof{left:10px;right:10px;max-width:none}}
</style>
<div id="socialProof" class="social-proof" aria-live="polite" aria-atomic="true">
  <div class="social-proof-content">
    <span class="social-proof-icon">📊</span>
    <span class="social-proof-text" id="socialProofText"></span>
  </div>
  <button class="social-proof-close" onclick="closeSocialProof()" aria-label="Chiudi">&times;</button>
</div>

<!-- JSON-LD Structured Data -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebApplication",
  "name": "BonusPerMe",
  "url": "https://bonusperme.it",
  "description": "Scopri in 2 minuti quali bonus, agevolazioni e detrazioni fiscali spettano alla tua famiglia nel 2026. Oltre 40 misure nazionali e regionali.",
  "applicationCategory": "FinanceApplication",
  "operatingSystem": "Web",
  "browserRequirements": "Requires JavaScript",
  "offers": {
    "@type": "Offer",
    "price": "0",
    "priceCurrency": "EUR"
  },
  "inLanguage": ["it","en","fr","es","ro","ar","sq"],
  "availableLanguage": [
    {"@type": "Language", "name": "Italian", "alternateName": "it"},
    {"@type": "Language", "name": "English", "alternateName": "en"},
    {"@type": "Language", "name": "French", "alternateName": "fr"},
    {"@type": "Language", "name": "Spanish", "alternateName": "es"},
    {"@type": "Language", "name": "Romanian", "alternateName": "ro"},
    {"@type": "Language", "name": "Arabic", "alternateName": "ar"},
    {"@type": "Language", "name": "Albanian", "alternateName": "sq"}
  ],
  "author": {
    "@type": "Organization",
    "name": "BonusPerMe",
    "url": "https://bonusperme.it",
    "logo": "https://bonusperme.it/apple-touch-icon.png",
    "contactPoint": {
      "@type": "ContactPoint",
      "email": "info@bonusperme.it",
      "contactType": "customer support",
      "availableLanguage": ["Italian","English"]
    }
  },
  "isAccessibleForFree": true,
  "audience": {
    "@type": "Audience",
    "audienceType": "Famiglie residenti in Italia"
  }
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Organization",
  "name": "BonusPerMe",
  "legalName": "Simone Nogara",
  "url": "https://bonusperme.it",
  "logo": "https://bonusperme.it/apple-touch-icon.png",
  "description": "Servizio gratuito per calcolare bonus e agevolazioni fiscali per le famiglie in Italia.",
  "address": {
    "@type": "PostalAddress",
    "streetAddress": "Via Morazzone 4",
    "addressLocality": "Como",
    "postalCode": "22100",
    "addressRegion": "CO",
    "addressCountry": "IT"
  },
  "contactPoint": {
    "@type": "ContactPoint",
    "email": "info@bonusperme.it",
    "contactType": "customer support"
  },
  "sameAs": [
    "https://github.com/nogarasimone/bonusperme"
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": [
    {
      "@type": "Question",
      "name": "Come funziona BonusPerMe?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Inserisci i dati della tua famiglia (età, ISEE, figli, occupazione) in 4 semplici passaggi e il sistema calcola automaticamente quali bonus e agevolazioni ti spettano tra oltre 40 misure nazionali e regionali attive nel 2026."
      }
    },
    {
      "@type": "Question",
      "name": "BonusPerMe è gratuito?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Sì, BonusPerMe è completamente gratuito, open source e non richiede registrazione. Non salviamo nessun dato personale: alla chiusura del browser tutto viene cancellato."
      }
    },
    {
      "@type": "Question",
      "name": "Quali bonus 2026 sono inclusi nel calcolo?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Oltre 40 bonus tra cui: Assegno Unico Universale, Bonus Nido, Bonus Bollette (luce, gas, acqua), Carta Dedicata a Te, Carta Acquisti, ADI (Assegno di Inclusione), SFL, Ecobonus, Sismabonus, detrazioni per spese mediche, mutuo prima casa e molti altri bonus nazionali e regionali."
      }
    },
    {
      "@type": "Question",
      "name": "Serve l'ISEE per usare BonusPerMe?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "No, puoi usare BonusPerMe anche senza ISEE. Tuttavia, con un valore ISEE valido puoi sbloccare fino a 12 bonus aggiuntivi legati alla soglia di reddito. Puoi caricare il PDF dell'attestazione ISEE oppure inserire il valore manualmente."
      }
    },
    {
      "@type": "Question",
      "name": "I miei dati sono al sicuro?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Assolutamente sì. BonusPerMe non ha database, non usa cookie di profilazione e non salva nessun dato. I tuoi dati restano solo nella sessione del browser e vengono cancellati quando chiudi la pagina. Il codice sorgente è pubblico su GitHub."
      }
    },
    {
      "@type": "Question",
      "name": "In quali lingue è disponibile?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "BonusPerMe è disponibile in 7 lingue: Italiano, English, Français, Español, Română, العربية e Shqip per facilitare l'accesso alle famiglie straniere residenti in Italia."
      }
    }
  ]
}
</script>

<!-- Service Worker Registration -->
<script>
if ('serviceWorker' in navigator) {
  window.addEventListener('load', function() {
    navigator.serviceWorker.register('/sw.js').catch(function() {});
  });
}
</script>
<div id="toastContainer" class="toast-container" aria-live="polite"></div>
</body>
</html>
